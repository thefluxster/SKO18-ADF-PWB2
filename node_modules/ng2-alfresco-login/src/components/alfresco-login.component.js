/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("@angular/core");
var forms_1 = require("@angular/forms");
var ng2_alfresco_core_1 = require("ng2-alfresco-core");
var form_submit_event_model_1 = require("../models/form-submit-event.model");
var AlfrescoLoginComponent = (function () {
    function AlfrescoLoginComponent(_fb, authService, settingsService, translateService, logService) {
        this._fb = _fb;
        this.authService = authService;
        this.settingsService = settingsService;
        this.translateService = translateService;
        this.logService = logService;
        this.baseComponentPath = module.id.replace('/alfresco-login.component.js', '');
        this.isPasswordShow = false;
        this.needHelpLink = '';
        this.registerLink = '';
        this.onSuccess = new core_1.EventEmitter();
        this.onError = new core_1.EventEmitter();
        this.executeSubmit = new core_1.EventEmitter();
        this.error = false;
        this.success = false;
        this.minLenght = 2;
        if (translateService) {
            translateService.addTranslationFolder('ng2-alfresco-login', 'node_modules/ng2-alfresco-login/src');
        }
        this.initFormError();
        this.initFormFieldsMessages();
    }
    AlfrescoLoginComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (this.hasCustomFiledsValidation()) {
            this.form = this._fb.group(this.fieldsValidation);
        }
        else {
            this.initFormFieldsDefault();
            this.initFormFieldsMessagesDefault();
        }
        this.form.valueChanges.subscribe(function (data) { return _this.onValueChanged(data); });
    };
    AlfrescoLoginComponent.prototype.onSubmit = function (values) {
        if (!this.checkRequiredParams()) {
            return false;
        }
        this.settingsService.setProviders(this.providers);
        this.settingsService.csrfDisabled = this.disableCsrf;
        this.disableError();
        var args = new form_submit_event_model_1.FormSubmitEvent(this.form);
        this.executeSubmit.emit(args);
        if (args.defaultPrevented) {
            return false;
        }
        else {
            this.performeLogin(values);
        }
    };
    AlfrescoLoginComponent.prototype.onValueChanged = function (data) {
        this.success = false;
        this.disableError();
        for (var field in this.formError) {
            if (field) {
                this.formError[field] = '';
                var hasError = (this.form.controls[field].errors && data[field] !== '') ||
                    (this.form.controls[field].dirty && !this.form.controls[field].valid);
                if (hasError) {
                    for (var key in this.form.controls[field].errors) {
                        if (key) {
                            this.formError[field] += this._message[field][key] + '';
                        }
                    }
                }
            }
        }
    };
    AlfrescoLoginComponent.prototype.performeLogin = function (values) {
        var _this = this;
        this.authService.login(values.username, values.password)
            .subscribe(function (token) {
            _this.success = true;
            _this.onSuccess.emit({ token: token, username: values.username, password: values.password });
        }, function (err) {
            _this.displayErrorMessage(err);
            _this.enableError();
            _this.onError.emit(err);
            _this.logService.error(err);
        }, function () { return _this.logService.info('Login done'); });
    };
    AlfrescoLoginComponent.prototype.displayErrorMessage = function (err) {
        if (err.error && err.error.crossDomain && err.error.message.indexOf('the network is offline, Origin is not allowed by' +
            ' Access-Control-Allow-Origin') !== -1) {
            this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ERROR-CORS';
            return;
        }
        if (err.status === 403 && err.message.indexOf('Invalid CSRF-token') !== -1) {
            this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ERROR-CSRF';
            return;
        }
        if (err.status === 403 && err.message.indexOf('The system is currently in read-only mode') !== -1) {
            this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ECM-LICENSE';
            return;
        }
        this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ERROR-CREDENTIALS';
    };
    AlfrescoLoginComponent.prototype.checkRequiredParams = function () {
        if (this.providers === undefined || this.providers === null || this.providers === '') {
            this.errorMsg = 'LOGIN.MESSAGES.LOGIN-ERROR-PROVIDERS';
            this.enableError();
            var messageProviders = void 0;
            messageProviders = this.translateService.get(this.errorMsg);
            this.onError.emit(messageProviders.value);
            return false;
        }
        return true;
    };
    AlfrescoLoginComponent.prototype.addCustomFormError = function (field, msg) {
        this.formError[field] += msg;
    };
    AlfrescoLoginComponent.prototype.addCustomValidationError = function (field, ruleId, msg, params) {
        var _this = this;
        if (params) {
            this.translateService.get(msg, params).subscribe(function (res) {
                _this._message[field][ruleId] = res;
            });
        }
        else {
            this._message[field][ruleId] = msg;
        }
    };
    AlfrescoLoginComponent.prototype.toggleShowPassword = function () {
        this.isPasswordShow = !this.isPasswordShow;
        if (this.isPasswordShow) {
            document.getElementById('password').type = 'text';
        }
        else {
            document.getElementById('password').type = 'password';
        }
    };
    AlfrescoLoginComponent.prototype.isErrorStyle = function (field) {
        if (typeof componentHandler !== 'undefined') {
            componentHandler.upgradeAllRegistered();
        }
        return !field.valid && field.dirty && !field.pristine;
    };
    AlfrescoLoginComponent.prototype.initFormError = function () {
        this.formError = {
            'username': '',
            'password': ''
        };
    };
    AlfrescoLoginComponent.prototype.initFormFieldsMessages = function () {
        this._message = {
            'username': {},
            'password': {}
        };
    };
    AlfrescoLoginComponent.prototype.initFormFieldsMessagesDefault = function () {
        var _this = this;
        this._message = {
            'username': {
                'required': 'LOGIN.MESSAGES.USERNAME-REQUIRED'
            },
            'password': {
                'required': 'LOGIN.MESSAGES.PASSWORD-REQUIRED'
            }
        };
        this.translateService.get('LOGIN.MESSAGES.USERNAME-MIN', { minLenght: this.minLenght }).subscribe(function (res) {
            _this._message['username']['minlength'] = res;
        });
    };
    AlfrescoLoginComponent.prototype.initFormFieldsDefault = function () {
        this.form = this._fb.group({
            username: ['', forms_1.Validators.compose([forms_1.Validators.required, forms_1.Validators.minLength(this.minLenght)])],
            password: ['', forms_1.Validators.required]
        });
    };
    AlfrescoLoginComponent.prototype.disableError = function () {
        this.error = false;
        this.initFormError();
    };
    AlfrescoLoginComponent.prototype.enableError = function () {
        this.error = true;
    };
    AlfrescoLoginComponent.prototype.hasCustomFiledsValidation = function () {
        return this.fieldsValidation !== undefined;
    };
    return AlfrescoLoginComponent;
}());
__decorate([
    core_1.Input(),
    __metadata("design:type", String)
], AlfrescoLoginComponent.prototype, "needHelpLink", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", String)
], AlfrescoLoginComponent.prototype, "registerLink", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", String)
], AlfrescoLoginComponent.prototype, "logoImageUrl", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", String)
], AlfrescoLoginComponent.prototype, "backgroundImageUrl", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", String)
], AlfrescoLoginComponent.prototype, "providers", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", Object)
], AlfrescoLoginComponent.prototype, "fieldsValidation", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", Boolean)
], AlfrescoLoginComponent.prototype, "disableCsrf", void 0);
__decorate([
    core_1.Output(),
    __metadata("design:type", Object)
], AlfrescoLoginComponent.prototype, "onSuccess", void 0);
__decorate([
    core_1.Output(),
    __metadata("design:type", Object)
], AlfrescoLoginComponent.prototype, "onError", void 0);
__decorate([
    core_1.Output(),
    __metadata("design:type", core_1.EventEmitter)
], AlfrescoLoginComponent.prototype, "executeSubmit", void 0);
AlfrescoLoginComponent = __decorate([
    core_1.Component({
        selector: 'alfresco-login',
        moduleId: module.id,
        template: "<div class=\"content-grid mdl-grid content-layout login-content\"      [style.background-image]=\"'url(' + (backgroundImageUrl || baseComponentPath + '/../assets/images/background.svg') + ')'\">     <div class=\"login-card-wide mdl-card mdl-shadow--4dp\">         <form [formGroup]=\"form\" (submit)=\"onSubmit(form.value, $event)\">             <div class=\"mdl-card__title alfresco-logo\">                  <!--HEADER TEMPLATE-->                 <template *ngIf=\"headerTemplate\"                           ngFor [ngForOf]=\"[data]\"                           [ngForTemplate]=\"headerTemplate\">                 </template>                  <img  *ngIf=\"!headerTemplate\" class=\"center\"                       [src]=\"logoImageUrl || baseComponentPath + '/../assets/images/alfresco-logo.svg'\"                      alt=\"{{'LOGIN.LOGO' | translate }}\">             </div>             <div class=\"mdl-card__supporting-text\">                  <!--ERRORS AREA-->                 <div>                     <div *ngIf=\"error\" id=\"login-error\" data-automation-id=\"login-error\"                          class=\"error mdl-card__supporting-text\">{{errorMsg | translate }}</div>                     <div *ngIf=\"success\" id=\"login-success\" data-automation-id=\"login-success\" class=\"mdl-card__supporting-text\" style=\"color: blue;\">{{'LOGIN.MESSAGES.LOGIN-SUCCESS' | translate }}</div>                 </div>                   <!--USERNAME FIELD-->                 <div [ngClass]=\"{'is-invalid': isErrorStyle(form.controls.username)}\"                      class=\"center mdl-textfield mdl-js-textfield mdl-textfield--floating-label \">                     <label for=\"username\" class=\"mdl-textfield__label\">{{'LOGIN.LABEL.USERNAME' | translate }}</label>                     <input                         type=\"text\"                         class=\"mdl-textfield__input\"                         id=\"username\"                         data-automation-id=\"username\"                         [formControl]=\"form.controls['username']\"                         tabindex=\"1\"                         autocapitalize=\"none\"/>                     <span class=\"mdl-tooltip--validation\" for=\"username\" *ngIf=\"formError.username\">                             <span id=\"username-error\" class=\"mdl-textfield__error\" style=\"visibility: visible\" data-automation-id=\"username-error\">{{formError.username | translate }}</span>                     </span>                 </div>                  <!--PASSWORD FIELD-->                 <div class=\"center mdl-textfield mdl-js-textfield mdl-textfield--floating-label alfresco-login__password\">                     <i [ngClass]=\"{hide: isPasswordShow}\" [ngClass]=\"{show: !isPasswordShow}\" (click)=\"toggleShowPassword()\" data-automation-id=\"show_password\"                        class=\"icon-inline\">                         <svg style=\"width:24px;height:24px;float: right;\" viewBox=\"0 0 24 24\">                             <path fill=\"#000000\" d=\"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z\" />                         </svg>                     </i>                     <i [ngClass]=\"{hide: !isPasswordShow}\" [ngClass]=\"{show: isPasswordShow}\" (click)=\"toggleShowPassword()\" data-automation-id=\"hide_password\"                        class=\"icon-inline\">                         <svg style=\"width:24px;height:24px;float: right;\" viewBox=\"0 0 24 24\">                             <path fill=\"#000000\" d=\"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z\" />                         </svg>                     </i>                     <label for=\"password\" class=\"mdl-textfield__label\">{{'LOGIN.LABEL.PASSWORD' | translate }}</label>                     <input type=\"password\" class=\"mdl-textfield__input\" id=\"password\" data-automation-id=\"password\" [formControl]=\"form.controls['password']\" tabindex=\"2\" />                     <span class=\"mdl-tooltip--validation\" for=\"password\" *ngIf=\"formError.password\">                             <span id=\"password-required\" class=\"mdl-textfield__error\" style=\"visibility: visible\" data-automation-id=\"password-required\">{{formError.password | translate }}</span>                     </span>                 </div>                  <!--CUSTOM CONTENT-->                 <ng-content></ng-content>                  <br>                 <button type=\"submit\" id=\"login-button\" tabindex=\"3\"                         class=\"center mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored\"                         data-automation-id=\"login-button\" [disabled]=\"!form.valid\">{{'LOGIN.BUTTON.LOGIN' | translate }}</button>                 <br>                 <div class=\"center\">                     <label class=\" mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect\" for=\"remember\">                         <input type=\"checkbox\" id=\"remember\" class=\"center mdl-checkbox__input\">                         <span id=\"login-remember\" class=\"mdl-checkbox__label\">{{'LOGIN.LABEL.REMEMBER' | translate }}</span>                     </label>                 </div>             </div>             <div class=\"mdl-card__actions mdl-card--border mdl-card__link\">                  <!--FOOTER TEMPLATE-->                 <template *ngIf=\"footerTemplate\"                           ngFor [ngForOf]=\"[data]\"                           [ngForTemplate]=\"footerTemplate\">                 </template>                 <div class=\"login-action\" *ngIf=\"!footerTemplate\">                     <div id=\"login-action-help\" class=\"login-action-left\"> <a href=\"{{needHelpLink}}\">{{'LOGIN.ACTION.HELP' | translate                         }}</a>                     </div>                     <div id=\"login-action-register\" class=\"login-action-right\"> <a href=\"{{registerLink}}\">{{'LOGIN.ACTION.REGISTER' |                         translate }}</a>                     </div>                 </div>             </div>             <div class=\"mdl-card__menu\">                 <div class=\"mdl-spinner mdl-js-spinner\"></div>             </div>         </form>     </div> </div>",
        styles: [":host {     position: absolute;     height: 100%;     width: 100%; }  :host .show {     display: block !important; }  :host .hide {     display: none !important; }  :host .icon-inline {     position: absolute;     display: block;     top: 31%;     left: 82%;     width: 30px;     overflow: hidden; }  :host .content-layout {     background-size: cover;     background-position: center;     height: 100%;     padding: 0; }  :host .login-card-wide.mdl-card {     align-self: center;     margin: auto;     border-radius: 8px;     background-color: #ffffff;     box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24), 0 0 2px 0 rgba(0, 0, 0, 0.12); }  :host .error {     color: red;     padding: 8px;     margin-bottom: 4px;     font-size: 13px; }  :host .center {     display: block;     margin-left: auto;     margin-right: auto; }  :host .alfresco-logo {     margin-top: 5px; }  :host .alfresco-logo img {     max-height: 43px; }  :host .mdl-button--raised.mdl-button--colored {     width: 98%;     height: 36px;     border-radius: 4px; }  :host .mdl-button--raised.mdl-button--colored {     color: rgb(255, 255, 255); }  :host .login-card-wide > .mdl-card__menu {     color: #000; }  :host .mdl-card__title-text {     color: #818184; }  :host .mdl-card__link a {     opacity: 0.87;     font-size: 14px;     color: #ff9100; }  :host .login-action {     margin: 20px;     margin-bottom: 50px; }  :host .login-action-left {     float: left;     margin-left: 10px; }  :host .login-action-right {     float: right;     margin-right: 10px; }  .ng-invalid.ng-invalid.ng-touched {     border-color: rgb(222, 50, 38);     box-shadow: none; }  .ng-invalid.ng-invalid.ng-touched + label {     color: rgb(222, 50, 38);     font-size: 12px; }  .ng-invalid.ng-invalid.ng-touched + label:after {     background-color: rgb(222, 50, 38); }  .ng-invalid.ng-invalid.ng-touched ~ .mdl-tooltip--validation {     background-color: transparent;     color: red;     font-size: 12px; }  :host .is-active {     background-color: transparent;     font-size: 12px;     font-weight: normal;     line-height: 1.33;     color: #ff1744; }  .ng-invalid.ng-touched:not(:focus) + label::before {     font-family: 'Material Icons';     font-weight: normal;     font-style: normal;     font-size: 24px;     /* Preferred icon size */      display: inline-block;     width: 1em;     height: 1em;     line-height: 1;     text-transform: none;     letter-spacing: normal;     word-wrap: normal;     /* Support for all WebKit browsers. */      -webkit-font-smoothing: antialiased;     /* Support for Safari and Chrome. */      text-rendering: optimizeLegibility;     /* Support for Firefox. */      -moz-osx-font-smoothing: grayscale;     /* Support for IE. */      font-feature-settings: 'liga';     content: \"warning\";     position: absolute;     right: 0;     bottom: 20px; }  .ng-valid.ng-touched:not(:focus) + label::before {     font-family: 'Material Icons';     font-weight: normal;     font-style: normal;     font-size: 24px;     /* Preferred icon size */      display: inline-block;     width: 1em;     height: 1em;     line-height: 1;     text-transform: none;     letter-spacing: normal;     word-wrap: normal;     /* Support for all WebKit browsers. */      -webkit-font-smoothing: antialiased;     /* Support for Safari and Chrome. */      text-rendering: optimizeLegibility;     /* Support for Firefox. */      -moz-osx-font-smoothing: grayscale;     /* Support for IE. */      font-feature-settings: 'liga';     content: \"done\";     position: absolute;     right: 0;     bottom: 20px; }  .alfresco-login__password {     padding-right: 25px; }  .alfresco-login__password .icon-inline {     left: 90%; }  .alfresco-login__container {     background-size: cover;     background-position: center; }"]
    }),
    __metadata("design:paramtypes", [forms_1.FormBuilder,
        ng2_alfresco_core_1.AlfrescoAuthenticationService,
        ng2_alfresco_core_1.AlfrescoSettingsService,
        ng2_alfresco_core_1.AlfrescoTranslationService,
        ng2_alfresco_core_1.LogService])
], AlfrescoLoginComponent);
exports.AlfrescoLoginComponent = AlfrescoLoginComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYWxmcmVzY28tbG9naW4uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRzs7Ozs7Ozs7Ozs7QUFFSCxzQ0FBNEY7QUFDNUYsd0NBQW9FO0FBQ3BFLHVEQUFtSTtBQUNuSSw2RUFBb0U7QUFVcEUsSUFBYSxzQkFBc0I7SUEwRC9CLGdDQUFvQixHQUFnQixFQUNoQixXQUEwQyxFQUMxQyxlQUF3QyxFQUN4QyxnQkFBNEMsRUFDNUMsVUFBc0I7UUFKdEIsUUFBRyxHQUFILEdBQUcsQ0FBYTtRQUNoQixnQkFBVyxHQUFYLFdBQVcsQ0FBK0I7UUFDMUMsb0JBQWUsR0FBZixlQUFlLENBQXlCO1FBQ3hDLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBNEI7UUFDNUMsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQTVEMUMsc0JBQWlCLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsOEJBQThCLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFMUUsbUJBQWMsR0FBWSxLQUFLLENBQUM7UUFHaEMsaUJBQVksR0FBVyxFQUFFLENBQUM7UUFHMUIsaUJBQVksR0FBVyxFQUFFLENBQUM7UUFrQjFCLGNBQVMsR0FBRyxJQUFJLG1CQUFZLEVBQUUsQ0FBQztRQUcvQixZQUFPLEdBQUcsSUFBSSxtQkFBWSxFQUFFLENBQUM7UUFHN0Isa0JBQWEsR0FBa0MsSUFBSSxtQkFBWSxFQUFtQixDQUFDO1FBR25GLFVBQUssR0FBWSxLQUFLLENBQUM7UUFFdkIsWUFBTyxHQUFZLEtBQUssQ0FBQztRQUl6QixjQUFTLEdBQVcsQ0FBQyxDQUFDO1FBcUJsQixFQUFFLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDbkIsZ0JBQWdCLENBQUMsb0JBQW9CLENBQUMsb0JBQW9CLEVBQUUscUNBQXFDLENBQUMsQ0FBQztRQUN2RyxDQUFDO1FBRUQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3JC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Z2luLmNvbXBvbmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBPbkluaXQsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtR3JvdXAsIEZvcm1CdWlsZGVyLCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgQWxmcmVzY29UcmFuc2xhdGlvblNlcnZpY2UsIEFsZnJlc2NvQXV0aGVudGljYXRpb25TZXJ2aWNlLCBBbGZyZXNjb1NldHRpbmdzU2VydmljZSwgTG9nU2VydmljZSB9IGZyb20gJ25nMi1hbGZyZXNjby1jb3JlJztcbmltcG9ydCB7IEZvcm1TdWJtaXRFdmVudCB9IGZyb20gJy4uL21vZGVscy9mb3JtLXN1Ym1pdC1ldmVudC5tb2RlbCc7XG5cbmRlY2xhcmUgbGV0IGNvbXBvbmVudEhhbmRsZXI6IGFueTtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhbGZyZXNjby1sb2dpbicsXG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWdyaWQgbWRsLWdyaWQgY29udGVudC1sYXlvdXQgbG9naW4tY29udGVudFxcXCIgICAgICBbc3R5bGUuYmFja2dyb3VuZC1pbWFnZV09XFxcIid1cmwoJyArIChiYWNrZ3JvdW5kSW1hZ2VVcmwgfHwgYmFzZUNvbXBvbmVudFBhdGggKyAnLy4uL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZC5zdmcnKSArICcpJ1xcXCI+ICAgICA8ZGl2IGNsYXNzPVxcXCJsb2dpbi1jYXJkLXdpZGUgbWRsLWNhcmQgbWRsLXNoYWRvdy0tNGRwXFxcIj4gICAgICAgICA8Zm9ybSBbZm9ybUdyb3VwXT1cXFwiZm9ybVxcXCIgKHN1Ym1pdCk9XFxcIm9uU3VibWl0KGZvcm0udmFsdWUsICRldmVudClcXFwiPiAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZGwtY2FyZF9fdGl0bGUgYWxmcmVzY28tbG9nb1xcXCI+ICAgICAgICAgICAgICAgICAgPCEtLUhFQURFUiBURU1QTEFURS0tPiAgICAgICAgICAgICAgICAgPHRlbXBsYXRlICpuZ0lmPVxcXCJoZWFkZXJUZW1wbGF0ZVxcXCIgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0ZvciBbbmdGb3JPZl09XFxcIltkYXRhXVxcXCIgICAgICAgICAgICAgICAgICAgICAgICAgICBbbmdGb3JUZW1wbGF0ZV09XFxcImhlYWRlclRlbXBsYXRlXFxcIj4gICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+ICAgICAgICAgICAgICAgICAgPGltZyAgKm5nSWY9XFxcIiFoZWFkZXJUZW1wbGF0ZVxcXCIgY2xhc3M9XFxcImNlbnRlclxcXCIgICAgICAgICAgICAgICAgICAgICAgIFtzcmNdPVxcXCJsb2dvSW1hZ2VVcmwgfHwgYmFzZUNvbXBvbmVudFBhdGggKyAnLy4uL2Fzc2V0cy9pbWFnZXMvYWxmcmVzY28tbG9nby5zdmcnXFxcIiAgICAgICAgICAgICAgICAgICAgICBhbHQ9XFxcInt7J0xPR0lOLkxPR08nIHwgdHJhbnNsYXRlIH19XFxcIj4gICAgICAgICAgICAgPC9kaXY+ICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm1kbC1jYXJkX19zdXBwb3J0aW5nLXRleHRcXFwiPiAgICAgICAgICAgICAgICAgIDwhLS1FUlJPUlMgQVJFQS0tPiAgICAgICAgICAgICAgICAgPGRpdj4gICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVxcXCJlcnJvclxcXCIgaWQ9XFxcImxvZ2luLWVycm9yXFxcIiBkYXRhLWF1dG9tYXRpb24taWQ9XFxcImxvZ2luLWVycm9yXFxcIiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImVycm9yIG1kbC1jYXJkX19zdXBwb3J0aW5nLXRleHRcXFwiPnt7ZXJyb3JNc2cgfCB0cmFuc2xhdGUgfX08L2Rpdj4gICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVxcXCJzdWNjZXNzXFxcIiBpZD1cXFwibG9naW4tc3VjY2Vzc1xcXCIgZGF0YS1hdXRvbWF0aW9uLWlkPVxcXCJsb2dpbi1zdWNjZXNzXFxcIiBjbGFzcz1cXFwibWRsLWNhcmRfX3N1cHBvcnRpbmctdGV4dFxcXCIgc3R5bGU9XFxcImNvbG9yOiBibHVlO1xcXCI+e3snTE9HSU4uTUVTU0FHRVMuTE9HSU4tU1VDQ0VTUycgfCB0cmFuc2xhdGUgfX08L2Rpdj4gICAgICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICAgICAgICAgICA8IS0tVVNFUk5BTUUgRklFTEQtLT4gICAgICAgICAgICAgICAgIDxkaXYgW25nQ2xhc3NdPVxcXCJ7J2lzLWludmFsaWQnOiBpc0Vycm9yU3R5bGUoZm9ybS5jb250cm9scy51c2VybmFtZSl9XFxcIiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cXFwiY2VudGVyIG1kbC10ZXh0ZmllbGQgbWRsLWpzLXRleHRmaWVsZCBtZGwtdGV4dGZpZWxkLS1mbG9hdGluZy1sYWJlbCBcXFwiPiAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcInVzZXJuYW1lXFxcIiBjbGFzcz1cXFwibWRsLXRleHRmaWVsZF9fbGFiZWxcXFwiPnt7J0xPR0lOLkxBQkVMLlVTRVJOQU1FJyB8IHRyYW5zbGF0ZSB9fTwvbGFiZWw+ICAgICAgICAgICAgICAgICAgICAgPGlucHV0ICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XFxcInRleHRcXFwiICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVxcXCJtZGwtdGV4dGZpZWxkX19pbnB1dFxcXCIgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XFxcInVzZXJuYW1lXFxcIiAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWF1dG9tYXRpb24taWQ9XFxcInVzZXJuYW1lXFxcIiAgICAgICAgICAgICAgICAgICAgICAgICBbZm9ybUNvbnRyb2xdPVxcXCJmb3JtLmNvbnRyb2xzWyd1c2VybmFtZSddXFxcIiAgICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cXFwiMVxcXCIgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b2NhcGl0YWxpemU9XFxcIm5vbmVcXFwiLz4gICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwibWRsLXRvb2x0aXAtLXZhbGlkYXRpb25cXFwiIGZvcj1cXFwidXNlcm5hbWVcXFwiICpuZ0lmPVxcXCJmb3JtRXJyb3IudXNlcm5hbWVcXFwiPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XFxcInVzZXJuYW1lLWVycm9yXFxcIiBjbGFzcz1cXFwibWRsLXRleHRmaWVsZF9fZXJyb3JcXFwiIHN0eWxlPVxcXCJ2aXNpYmlsaXR5OiB2aXNpYmxlXFxcIiBkYXRhLWF1dG9tYXRpb24taWQ9XFxcInVzZXJuYW1lLWVycm9yXFxcIj57e2Zvcm1FcnJvci51c2VybmFtZSB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj4gICAgICAgICAgICAgICAgICAgICA8L3NwYW4+ICAgICAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICAgICAgICAgICA8IS0tUEFTU1dPUkQgRklFTEQtLT4gICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNlbnRlciBtZGwtdGV4dGZpZWxkIG1kbC1qcy10ZXh0ZmllbGQgbWRsLXRleHRmaWVsZC0tZmxvYXRpbmctbGFiZWwgYWxmcmVzY28tbG9naW5fX3Bhc3N3b3JkXFxcIj4gICAgICAgICAgICAgICAgICAgICA8aSBbbmdDbGFzc109XFxcIntoaWRlOiBpc1Bhc3N3b3JkU2hvd31cXFwiIFtuZ0NsYXNzXT1cXFwie3Nob3c6ICFpc1Bhc3N3b3JkU2hvd31cXFwiIChjbGljayk9XFxcInRvZ2dsZVNob3dQYXNzd29yZCgpXFxcIiBkYXRhLWF1dG9tYXRpb24taWQ9XFxcInNob3dfcGFzc3dvcmRcXFwiICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImljb24taW5saW5lXFxcIj4gICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBzdHlsZT1cXFwid2lkdGg6MjRweDtoZWlnaHQ6MjRweDtmbG9hdDogcmlnaHQ7XFxcIiB2aWV3Qm94PVxcXCIwIDAgMjQgMjRcXFwiPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbD1cXFwiIzAwMDAwMFxcXCIgZD1cXFwiTTEyLDlBMywzIDAgMCwwIDksMTJBMywzIDAgMCwwIDEyLDE1QTMsMyAwIDAsMCAxNSwxMkEzLDMgMCAwLDAgMTIsOU0xMiwxN0E1LDUgMCAwLDEgNywxMkE1LDUgMCAwLDEgMTIsN0E1LDUgMCAwLDEgMTcsMTJBNSw1IDAgMCwxIDEyLDE3TTEyLDQuNUM3LDQuNSAyLjczLDcuNjEgMSwxMkMyLjczLDE2LjM5IDcsMTkuNSAxMiwxOS41QzE3LDE5LjUgMjEuMjcsMTYuMzkgMjMsMTJDMjEuMjcsNy42MSAxNyw0LjUgMTIsNC41WlxcXCIgLz4gICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+ICAgICAgICAgICAgICAgICAgICAgPC9pPiAgICAgICAgICAgICAgICAgICAgIDxpIFtuZ0NsYXNzXT1cXFwie2hpZGU6ICFpc1Bhc3N3b3JkU2hvd31cXFwiIFtuZ0NsYXNzXT1cXFwie3Nob3c6IGlzUGFzc3dvcmRTaG93fVxcXCIgKGNsaWNrKT1cXFwidG9nZ2xlU2hvd1Bhc3N3b3JkKClcXFwiIGRhdGEtYXV0b21hdGlvbi1pZD1cXFwiaGlkZV9wYXNzd29yZFxcXCIgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cXFwiaWNvbi1pbmxpbmVcXFwiPiAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHN0eWxlPVxcXCJ3aWR0aDoyNHB4O2hlaWdodDoyNHB4O2Zsb2F0OiByaWdodDtcXFwiIHZpZXdCb3g9XFxcIjAgMCAyNCAyNFxcXCI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPVxcXCIjMDAwMDAwXFxcIiBkPVxcXCJNMTEuODMsOUwxNSwxMi4xNkMxNSwxMi4xMSAxNSwxMi4wNSAxNSwxMkEzLDMgMCAwLDAgMTIsOUMxMS45NCw5IDExLjg5LDkgMTEuODMsOU03LjUzLDkuOEw5LjA4LDExLjM1QzkuMDMsMTEuNTYgOSwxMS43NyA5LDEyQTMsMyAwIDAsMCAxMiwxNUMxMi4yMiwxNSAxMi40NCwxNC45NyAxMi42NSwxNC45MkwxNC4yLDE2LjQ3QzEzLjUzLDE2LjggMTIuNzksMTcgMTIsMTdBNSw1IDAgMCwxIDcsMTJDNywxMS4yMSA3LjIsMTAuNDcgNy41Myw5LjhNMiw0LjI3TDQuMjgsNi41NUw0LjczLDdDMy4wOCw4LjMgMS43OCwxMCAxLDEyQzIuNzMsMTYuMzkgNywxOS41IDEyLDE5LjVDMTMuNTUsMTkuNSAxNS4wMywxOS4yIDE2LjM4LDE4LjY2TDE2LjgxLDE5LjA4TDE5LjczLDIyTDIxLDIwLjczTDMuMjcsM00xMiw3QTUsNSAwIDAsMSAxNywxMkMxNywxMi42NCAxNi44NywxMy4yNiAxNi42NCwxMy44MkwxOS41NywxNi43NUMyMS4wNywxNS41IDIyLjI3LDEzLjg2IDIzLDEyQzIxLjI3LDcuNjEgMTcsNC41IDEyLDQuNUMxMC42LDQuNSA5LjI2LDQuNzUgOCw1LjJMMTAuMTcsNy4zNUMxMC43NCw3LjEzIDExLjM1LDcgMTIsN1pcXFwiIC8+ICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPiAgICAgICAgICAgICAgICAgICAgIDwvaT4gICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJwYXNzd29yZFxcXCIgY2xhc3M9XFxcIm1kbC10ZXh0ZmllbGRfX2xhYmVsXFxcIj57eydMT0dJTi5MQUJFTC5QQVNTV09SRCcgfCB0cmFuc2xhdGUgfX08L2xhYmVsPiAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJwYXNzd29yZFxcXCIgY2xhc3M9XFxcIm1kbC10ZXh0ZmllbGRfX2lucHV0XFxcIiBpZD1cXFwicGFzc3dvcmRcXFwiIGRhdGEtYXV0b21hdGlvbi1pZD1cXFwicGFzc3dvcmRcXFwiIFtmb3JtQ29udHJvbF09XFxcImZvcm0uY29udHJvbHNbJ3Bhc3N3b3JkJ11cXFwiIHRhYmluZGV4PVxcXCIyXFxcIiAvPiAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJtZGwtdG9vbHRpcC0tdmFsaWRhdGlvblxcXCIgZm9yPVxcXCJwYXNzd29yZFxcXCIgKm5nSWY9XFxcImZvcm1FcnJvci5wYXNzd29yZFxcXCI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cXFwicGFzc3dvcmQtcmVxdWlyZWRcXFwiIGNsYXNzPVxcXCJtZGwtdGV4dGZpZWxkX19lcnJvclxcXCIgc3R5bGU9XFxcInZpc2liaWxpdHk6IHZpc2libGVcXFwiIGRhdGEtYXV0b21hdGlvbi1pZD1cXFwicGFzc3dvcmQtcmVxdWlyZWRcXFwiPnt7Zm9ybUVycm9yLnBhc3N3b3JkIHwgdHJhbnNsYXRlIH19PC9zcGFuPiAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4gICAgICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICAgICAgICAgIDwhLS1DVVNUT00gQ09OVEVOVC0tPiAgICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PiAgICAgICAgICAgICAgICAgIDxicj4gICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cXFwic3VibWl0XFxcIiBpZD1cXFwibG9naW4tYnV0dG9uXFxcIiB0YWJpbmRleD1cXFwiM1xcXCIgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImNlbnRlciBtZGwtYnV0dG9uIG1kbC1qcy1idXR0b24gbWRsLWJ1dHRvbi0tcmFpc2VkIG1kbC1qcy1yaXBwbGUtZWZmZWN0IG1kbC1idXR0b24tLWNvbG9yZWRcXFwiICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtYXV0b21hdGlvbi1pZD1cXFwibG9naW4tYnV0dG9uXFxcIiBbZGlzYWJsZWRdPVxcXCIhZm9ybS52YWxpZFxcXCI+e3snTE9HSU4uQlVUVE9OLkxPR0lOJyB8IHRyYW5zbGF0ZSB9fTwvYnV0dG9uPiAgICAgICAgICAgICAgICAgPGJyPiAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY2VudGVyXFxcIj4gICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcIiBtZGwtY2hlY2tib3ggbWRsLWpzLWNoZWNrYm94IG1kbC1qcy1yaXBwbGUtZWZmZWN0XFxcIiBmb3I9XFxcInJlbWVtYmVyXFxcIj4gICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBpZD1cXFwicmVtZW1iZXJcXFwiIGNsYXNzPVxcXCJjZW50ZXIgbWRsLWNoZWNrYm94X19pbnB1dFxcXCI+ICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVxcXCJsb2dpbi1yZW1lbWJlclxcXCIgY2xhc3M9XFxcIm1kbC1jaGVja2JveF9fbGFiZWxcXFwiPnt7J0xPR0lOLkxBQkVMLlJFTUVNQkVSJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj4gICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPiAgICAgICAgICAgICAgICAgPC9kaXY+ICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZGwtY2FyZF9fYWN0aW9ucyBtZGwtY2FyZC0tYm9yZGVyIG1kbC1jYXJkX19saW5rXFxcIj4gICAgICAgICAgICAgICAgICA8IS0tRk9PVEVSIFRFTVBMQVRFLS0+ICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgKm5nSWY9XFxcImZvb3RlclRlbXBsYXRlXFxcIiAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRm9yIFtuZ0Zvck9mXT1cXFwiW2RhdGFdXFxcIiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuZ0ZvclRlbXBsYXRlXT1cXFwiZm9vdGVyVGVtcGxhdGVcXFwiPiAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT4gICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImxvZ2luLWFjdGlvblxcXCIgKm5nSWY9XFxcIiFmb290ZXJUZW1wbGF0ZVxcXCI+ICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cXFwibG9naW4tYWN0aW9uLWhlbHBcXFwiIGNsYXNzPVxcXCJsb2dpbi1hY3Rpb24tbGVmdFxcXCI+IDxhIGhyZWY9XFxcInt7bmVlZEhlbHBMaW5rfX1cXFwiPnt7J0xPR0lOLkFDVElPTi5IRUxQJyB8IHRyYW5zbGF0ZSAgICAgICAgICAgICAgICAgICAgICAgICB9fTwvYT4gICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVxcXCJsb2dpbi1hY3Rpb24tcmVnaXN0ZXJcXFwiIGNsYXNzPVxcXCJsb2dpbi1hY3Rpb24tcmlnaHRcXFwiPiA8YSBocmVmPVxcXCJ7e3JlZ2lzdGVyTGlua319XFxcIj57eydMT0dJTi5BQ1RJT04uUkVHSVNURVInIHwgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlIH19PC9hPiAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICAgICAgICAgPC9kaXY+ICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZGwtY2FyZF9fbWVudVxcXCI+ICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZGwtc3Bpbm5lciBtZGwtanMtc3Bpbm5lclxcXCI+PC9kaXY+ICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgIDwvZm9ybT4gICAgIDwvZGl2PiA8L2Rpdj5cIixcbiAgICBzdHlsZXM6IFtcIjpob3N0IHsgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgICAgIGhlaWdodDogMTAwJTsgICAgIHdpZHRoOiAxMDAlOyB9ICA6aG9zdCAuc2hvdyB7ICAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyB9ICA6aG9zdCAuaGlkZSB7ICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0gIDpob3N0IC5pY29uLWlubGluZSB7ICAgICBwb3NpdGlvbjogYWJzb2x1dGU7ICAgICBkaXNwbGF5OiBibG9jazsgICAgIHRvcDogMzElOyAgICAgbGVmdDogODIlOyAgICAgd2lkdGg6IDMwcHg7ICAgICBvdmVyZmxvdzogaGlkZGVuOyB9ICA6aG9zdCAuY29udGVudC1sYXlvdXQgeyAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsgICAgIGhlaWdodDogMTAwJTsgICAgIHBhZGRpbmc6IDA7IH0gIDpob3N0IC5sb2dpbi1jYXJkLXdpZGUubWRsLWNhcmQgeyAgICAgYWxpZ24tc2VsZjogY2VudGVyOyAgICAgbWFyZ2luOiBhdXRvOyAgICAgYm9yZGVyLXJhZGl1czogOHB4OyAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgICAgIGJveC1zaGFkb3c6IDAgMnB4IDJweCAwIHJnYmEoMCwgMCwgMCwgMC4yNCksIDAgMCAycHggMCByZ2JhKDAsIDAsIDAsIDAuMTIpOyB9ICA6aG9zdCAuZXJyb3IgeyAgICAgY29sb3I6IHJlZDsgICAgIHBhZGRpbmc6IDhweDsgICAgIG1hcmdpbi1ib3R0b206IDRweDsgICAgIGZvbnQtc2l6ZTogMTNweDsgfSAgOmhvc3QgLmNlbnRlciB7ICAgICBkaXNwbGF5OiBibG9jazsgICAgIG1hcmdpbi1sZWZ0OiBhdXRvOyAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvOyB9ICA6aG9zdCAuYWxmcmVzY28tbG9nbyB7ICAgICBtYXJnaW4tdG9wOiA1cHg7IH0gIDpob3N0IC5hbGZyZXNjby1sb2dvIGltZyB7ICAgICBtYXgtaGVpZ2h0OiA0M3B4OyB9ICA6aG9zdCAubWRsLWJ1dHRvbi0tcmFpc2VkLm1kbC1idXR0b24tLWNvbG9yZWQgeyAgICAgd2lkdGg6IDk4JTsgICAgIGhlaWdodDogMzZweDsgICAgIGJvcmRlci1yYWRpdXM6IDRweDsgfSAgOmhvc3QgLm1kbC1idXR0b24tLXJhaXNlZC5tZGwtYnV0dG9uLS1jb2xvcmVkIHsgICAgIGNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7IH0gIDpob3N0IC5sb2dpbi1jYXJkLXdpZGUgPiAubWRsLWNhcmRfX21lbnUgeyAgICAgY29sb3I6ICMwMDA7IH0gIDpob3N0IC5tZGwtY2FyZF9fdGl0bGUtdGV4dCB7ICAgICBjb2xvcjogIzgxODE4NDsgfSAgOmhvc3QgLm1kbC1jYXJkX19saW5rIGEgeyAgICAgb3BhY2l0eTogMC44NzsgICAgIGZvbnQtc2l6ZTogMTRweDsgICAgIGNvbG9yOiAjZmY5MTAwOyB9ICA6aG9zdCAubG9naW4tYWN0aW9uIHsgICAgIG1hcmdpbjogMjBweDsgICAgIG1hcmdpbi1ib3R0b206IDUwcHg7IH0gIDpob3N0IC5sb2dpbi1hY3Rpb24tbGVmdCB7ICAgICBmbG9hdDogbGVmdDsgICAgIG1hcmdpbi1sZWZ0OiAxMHB4OyB9ICA6aG9zdCAubG9naW4tYWN0aW9uLXJpZ2h0IHsgICAgIGZsb2F0OiByaWdodDsgICAgIG1hcmdpbi1yaWdodDogMTBweDsgfSAgLm5nLWludmFsaWQubmctaW52YWxpZC5uZy10b3VjaGVkIHsgICAgIGJvcmRlci1jb2xvcjogcmdiKDIyMiwgNTAsIDM4KTsgICAgIGJveC1zaGFkb3c6IG5vbmU7IH0gIC5uZy1pbnZhbGlkLm5nLWludmFsaWQubmctdG91Y2hlZCArIGxhYmVsIHsgICAgIGNvbG9yOiByZ2IoMjIyLCA1MCwgMzgpOyAgICAgZm9udC1zaXplOiAxMnB4OyB9ICAubmctaW52YWxpZC5uZy1pbnZhbGlkLm5nLXRvdWNoZWQgKyBsYWJlbDphZnRlciB7ICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjIyLCA1MCwgMzgpOyB9ICAubmctaW52YWxpZC5uZy1pbnZhbGlkLm5nLXRvdWNoZWQgfiAubWRsLXRvb2x0aXAtLXZhbGlkYXRpb24geyAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7ICAgICBjb2xvcjogcmVkOyAgICAgZm9udC1zaXplOiAxMnB4OyB9ICA6aG9zdCAuaXMtYWN0aXZlIHsgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyAgICAgZm9udC1zaXplOiAxMnB4OyAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsgICAgIGxpbmUtaGVpZ2h0OiAxLjMzOyAgICAgY29sb3I6ICNmZjE3NDQ7IH0gIC5uZy1pbnZhbGlkLm5nLXRvdWNoZWQ6bm90KDpmb2N1cykgKyBsYWJlbDo6YmVmb3JlIHsgICAgIGZvbnQtZmFtaWx5OiAnTWF0ZXJpYWwgSWNvbnMnOyAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsgICAgIGZvbnQtc3R5bGU6IG5vcm1hbDsgICAgIGZvbnQtc2l6ZTogMjRweDsgICAgIC8qIFByZWZlcnJlZCBpY29uIHNpemUgKi8gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7ICAgICB3aWR0aDogMWVtOyAgICAgaGVpZ2h0OiAxZW07ICAgICBsaW5lLWhlaWdodDogMTsgICAgIHRleHQtdHJhbnNmb3JtOiBub25lOyAgICAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbDsgICAgIHdvcmQtd3JhcDogbm9ybWFsOyAgICAgLyogU3VwcG9ydCBmb3IgYWxsIFdlYktpdCBicm93c2Vycy4gKi8gICAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsgICAgIC8qIFN1cHBvcnQgZm9yIFNhZmFyaSBhbmQgQ2hyb21lLiAqLyAgICAgIHRleHQtcmVuZGVyaW5nOiBvcHRpbWl6ZUxlZ2liaWxpdHk7ICAgICAvKiBTdXBwb3J0IGZvciBGaXJlZm94LiAqLyAgICAgIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7ICAgICAvKiBTdXBwb3J0IGZvciBJRS4gKi8gICAgICBmb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJzsgICAgIGNvbnRlbnQ6IFxcXCJ3YXJuaW5nXFxcIjsgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgICAgIHJpZ2h0OiAwOyAgICAgYm90dG9tOiAyMHB4OyB9ICAubmctdmFsaWQubmctdG91Y2hlZDpub3QoOmZvY3VzKSArIGxhYmVsOjpiZWZvcmUgeyAgICAgZm9udC1mYW1pbHk6ICdNYXRlcmlhbCBJY29ucyc7ICAgICBmb250LXdlaWdodDogbm9ybWFsOyAgICAgZm9udC1zdHlsZTogbm9ybWFsOyAgICAgZm9udC1zaXplOiAyNHB4OyAgICAgLyogUHJlZmVycmVkIGljb24gc2l6ZSAqLyAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgICAgIHdpZHRoOiAxZW07ICAgICBoZWlnaHQ6IDFlbTsgICAgIGxpbmUtaGVpZ2h0OiAxOyAgICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7ICAgICBsZXR0ZXItc3BhY2luZzogbm9ybWFsOyAgICAgd29yZC13cmFwOiBub3JtYWw7ICAgICAvKiBTdXBwb3J0IGZvciBhbGwgV2ViS2l0IGJyb3dzZXJzLiAqLyAgICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOyAgICAgLyogU3VwcG9ydCBmb3IgU2FmYXJpIGFuZCBDaHJvbWUuICovICAgICAgdGV4dC1yZW5kZXJpbmc6IG9wdGltaXplTGVnaWJpbGl0eTsgICAgIC8qIFN1cHBvcnQgZm9yIEZpcmVmb3guICovICAgICAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTsgICAgIC8qIFN1cHBvcnQgZm9yIElFLiAqLyAgICAgIGZvbnQtZmVhdHVyZS1zZXR0aW5nczogJ2xpZ2EnOyAgICAgY29udGVudDogXFxcImRvbmVcXFwiOyAgICAgcG9zaXRpb246IGFic29sdXRlOyAgICAgcmlnaHQ6IDA7ICAgICBib3R0b206IDIwcHg7IH0gIC5hbGZyZXNjby1sb2dpbl9fcGFzc3dvcmQgeyAgICAgcGFkZGluZy1yaWdodDogMjVweDsgfSAgLmFsZnJlc2NvLWxvZ2luX19wYXNzd29yZCAuaWNvbi1pbmxpbmUgeyAgICAgbGVmdDogOTAlOyB9ICAuYWxmcmVzY28tbG9naW5fX2NvbnRhaW5lciB7ICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOyAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOyB9XCJdXG59KVxuZXhwb3J0IGNsYXNzIEFsZnJlc2NvTG9naW5Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgYmFzZUNvbXBvbmVudFBhdGggPSBtb2R1bGUuaWQucmVwbGFjZSgnL2FsZnJlc2NvLWxvZ2luLmNvbXBvbmVudC5qcycsICcnKTtcblxuICAgIGlzUGFzc3dvcmRTaG93OiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBASW5wdXQoKVxuICAgIG5lZWRIZWxwTGluazogc3RyaW5nID0gJyc7XG5cbiAgICBASW5wdXQoKVxuICAgIHJlZ2lzdGVyTGluazogc3RyaW5nID0gJyc7XG5cbiAgICBASW5wdXQoKVxuICAgIGxvZ29JbWFnZVVybDogc3RyaW5nO1xuXG4gICAgQElucHV0KClcbiAgICBiYWNrZ3JvdW5kSW1hZ2VVcmw6IHN0cmluZztcblxuICAgIEBJbnB1dCgpXG4gICAgcHJvdmlkZXJzOiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKVxuICAgIGZpZWxkc1ZhbGlkYXRpb246IGFueTtcblxuICAgIEBJbnB1dCgpXG4gICAgZGlzYWJsZUNzcmY6IGJvb2xlYW47XG5cbiAgICBAT3V0cHV0KClcbiAgICBvblN1Y2Nlc3MgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBAT3V0cHV0KClcbiAgICBvbkVycm9yID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgQE91dHB1dCgpXG4gICAgZXhlY3V0ZVN1Ym1pdDogRXZlbnRFbWl0dGVyPEZvcm1TdWJtaXRFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPEZvcm1TdWJtaXRFdmVudD4oKTtcblxuICAgIGZvcm06IEZvcm1Hcm91cDtcbiAgICBlcnJvcjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGVycm9yTXNnOiBzdHJpbmc7XG4gICAgc3VjY2VzczogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgZm9ybUVycm9yOiB7IFtpZDogc3RyaW5nXTogc3RyaW5nIH07XG5cbiAgICBtaW5MZW5naHQ6IG51bWJlciA9IDI7XG5cbiAgICBmb290ZXJUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcblxuICAgIGhlYWRlclRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xuXG4gICAgcHJpdmF0ZSBfbWVzc2FnZTogeyBbaWQ6IHN0cmluZ106IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgfSB9O1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gX2ZiXG4gICAgICogQHBhcmFtIGF1dGhTZXJ2aWNlXG4gICAgICogQHBhcmFtIHNldHRpbmdzU2VydmljZVxuICAgICAqIEBwYXJhbSB0cmFuc2xhdGVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9mYjogRm9ybUJ1aWxkZXIsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBhdXRoU2VydmljZTogQWxmcmVzY29BdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBzZXR0aW5nc1NlcnZpY2U6IEFsZnJlc2NvU2V0dGluZ3NTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgdHJhbnNsYXRlU2VydmljZTogQWxmcmVzY29UcmFuc2xhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBsb2dTZXJ2aWNlOiBMb2dTZXJ2aWNlKSB7XG5cbiAgICAgICAgaWYgKHRyYW5zbGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0ZVNlcnZpY2UuYWRkVHJhbnNsYXRpb25Gb2xkZXIoJ25nMi1hbGZyZXNjby1sb2dpbicsICdub2RlX21vZHVsZXMvbmcyLWFsZnJlc2NvLWxvZ2luL3NyYycpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbml0Rm9ybUVycm9yKCk7XG4gICAgICAgIHRoaXMuaW5pdEZvcm1GaWVsZHNNZXNzYWdlcygpO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZiAodGhpcy5oYXNDdXN0b21GaWxlZHNWYWxpZGF0aW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybSA9IHRoaXMuX2ZiLmdyb3VwKHRoaXMuZmllbGRzVmFsaWRhdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmluaXRGb3JtRmllbGRzRGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5pbml0Rm9ybUZpZWxkc01lc3NhZ2VzRGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZm9ybS52YWx1ZUNoYW5nZXMuc3Vic2NyaWJlKGRhdGEgPT4gdGhpcy5vblZhbHVlQ2hhbmdlZChkYXRhKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWV0aG9kIGNhbGxlZCBvbiBzdWJtaXQgZm9ybVxuICAgICAqIEBwYXJhbSB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKi9cbiAgICBvblN1Ym1pdCh2YWx1ZXM6IGFueSkge1xuICAgICAgICBpZiAoIXRoaXMuY2hlY2tSZXF1aXJlZFBhcmFtcygpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXR0aW5nc1NlcnZpY2Uuc2V0UHJvdmlkZXJzKHRoaXMucHJvdmlkZXJzKTtcbiAgICAgICAgdGhpcy5zZXR0aW5nc1NlcnZpY2UuY3NyZkRpc2FibGVkID0gdGhpcy5kaXNhYmxlQ3NyZjtcblxuICAgICAgICB0aGlzLmRpc2FibGVFcnJvcigpO1xuXG4gICAgICAgIGxldCBhcmdzID0gbmV3IEZvcm1TdWJtaXRFdmVudCh0aGlzLmZvcm0pO1xuICAgICAgICB0aGlzLmV4ZWN1dGVTdWJtaXQuZW1pdChhcmdzKTtcblxuICAgICAgICBpZiAoYXJncy5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1lTG9naW4odmFsdWVzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtZXRob2QgY2hlY2sgdGhlIGVycm9yIGluIHRoZSBmb3JtIGFuZCBwdXNoIHRoZSBlcnJvciBpbiB0aGUgZm9ybUVycm9yIG9iamVjdFxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICovXG4gICAgb25WYWx1ZUNoYW5nZWQoZGF0YTogYW55KSB7XG4gICAgICAgIHRoaXMuc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRpc2FibGVFcnJvcigpO1xuICAgICAgICBmb3IgKGxldCBmaWVsZCBpbiB0aGlzLmZvcm1FcnJvcikge1xuICAgICAgICAgICAgaWYgKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtRXJyb3JbZmllbGRdID0gJyc7XG4gICAgICAgICAgICAgICAgbGV0IGhhc0Vycm9yID0gKHRoaXMuZm9ybS5jb250cm9sc1tmaWVsZF0uZXJyb3JzICYmIGRhdGFbZmllbGRdICE9PSAnJykgfHxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZm9ybS5jb250cm9sc1tmaWVsZF0uZGlydHkgJiYgIXRoaXMuZm9ybS5jb250cm9sc1tmaWVsZF0udmFsaWQpO1xuICAgICAgICAgICAgICAgIGlmIChoYXNFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5mb3JtLmNvbnRyb2xzW2ZpZWxkXS5lcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1FcnJvcltmaWVsZF0gKz0gdGhpcy5fbWVzc2FnZVtmaWVsZF1ba2V5XSArICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybWUgdGhlIGxvZ2luIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0gdmFsdWVzXG4gICAgICovXG4gICAgcHJpdmF0ZSBwZXJmb3JtZUxvZ2luKHZhbHVlczogYW55KSB7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2UubG9naW4odmFsdWVzLnVzZXJuYW1lLCB2YWx1ZXMucGFzc3dvcmQpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgICh0b2tlbjogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VjY2VzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TdWNjZXNzLmVtaXQoe3Rva2VuOiB0b2tlbiwgdXNlcm5hbWU6IHZhbHVlcy51c2VybmFtZSwgcGFzc3dvcmQ6IHZhbHVlcy5wYXNzd29yZH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheUVycm9yTWVzc2FnZShlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvci5lbWl0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nU2VydmljZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKCkgPT4gdGhpcy5sb2dTZXJ2aWNlLmluZm8oJ0xvZ2luIGRvbmUnKVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBhbmQgZGlzcGxheSB0aGUgcmlnaHQgZXJyb3IgbWVzc2FnZSBpbiB0aGUgVUlcbiAgICAgKi9cbiAgICBwcml2YXRlIGRpc3BsYXlFcnJvck1lc3NhZ2UoZXJyOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgaWYgKGVyci5lcnJvciAmJiBlcnIuZXJyb3IuY3Jvc3NEb21haW4gJiYgZXJyLmVycm9yLm1lc3NhZ2UuaW5kZXhPZigndGhlIG5ldHdvcmsgaXMgb2ZmbGluZSwgT3JpZ2luIGlzIG5vdCBhbGxvd2VkIGJ5JyArXG4gICAgICAgICAgICAgICAgJyBBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cgPSAnTE9HSU4uTUVTU0FHRVMuTE9HSU4tRVJST1ItQ09SUyc7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXJyLnN0YXR1cyA9PT0gNDAzICYmIGVyci5tZXNzYWdlLmluZGV4T2YoJ0ludmFsaWQgQ1NSRi10b2tlbicpICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5lcnJvck1zZyA9ICdMT0dJTi5NRVNTQUdFUy5MT0dJTi1FUlJPUi1DU1JGJztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnIuc3RhdHVzID09PSA0MDMgJiYgZXJyLm1lc3NhZ2UuaW5kZXhPZignVGhlIHN5c3RlbSBpcyBjdXJyZW50bHkgaW4gcmVhZC1vbmx5IG1vZGUnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cgPSAnTE9HSU4uTUVTU0FHRVMuTE9HSU4tRUNNLUxJQ0VOU0UnO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lcnJvck1zZyA9ICdMT0dJTi5NRVNTQUdFUy5MT0dJTi1FUlJPUi1DUkVERU5USUFMUyc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhlIHJlcXVpcmUgcGFyYW1ldGVyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgcHJpdmF0ZSBjaGVja1JlcXVpcmVkUGFyYW1zKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5wcm92aWRlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnByb3ZpZGVycyA9PT0gbnVsbCB8fCB0aGlzLnByb3ZpZGVycyA9PT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cgPSAnTE9HSU4uTUVTU0FHRVMuTE9HSU4tRVJST1ItUFJPVklERVJTJztcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlRXJyb3IoKTtcbiAgICAgICAgICAgIGxldCBtZXNzYWdlUHJvdmlkZXJzOiBhbnk7XG4gICAgICAgICAgICBtZXNzYWdlUHJvdmlkZXJzID0gdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmdldCh0aGlzLmVycm9yTXNnKTtcbiAgICAgICAgICAgIHRoaXMub25FcnJvci5lbWl0KG1lc3NhZ2VQcm92aWRlcnMudmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIGN1c3RvbSBmb3JtIGVycm9yIGZvciBhIGZpZWxkXG4gICAgICogQHBhcmFtIGZpZWxkXG4gICAgICogQHBhcmFtIG1zZ1xuICAgICAqL1xuICAgIHB1YmxpYyBhZGRDdXN0b21Gb3JtRXJyb3IoZmllbGQ6IHN0cmluZywgbXNnOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5mb3JtRXJyb3JbZmllbGRdICs9IG1zZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBjdXN0b20gdmFsaWRhdGlvbiBydWxlIGVycm9yIGZvciBhIGZpZWxkXG4gICAgICogQHBhcmFtIGZpZWxkXG4gICAgICogQHBhcmFtIHJ1bGVJZCAtIGkuZS4gcmVxdWlyZWQgfCBtaW5sZW5ndGggfCBtYXhsZW5ndGhcbiAgICAgKiBAcGFyYW0gbXNnXG4gICAgICovXG4gICAgcHVibGljIGFkZEN1c3RvbVZhbGlkYXRpb25FcnJvcihmaWVsZDogc3RyaW5nLCBydWxlSWQ6IHN0cmluZywgbXNnOiBzdHJpbmcsIHBhcmFtcz86IGFueSkge1xuICAgICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuZ2V0KG1zZywgcGFyYW1zKS5zdWJzY3JpYmUoKHJlczogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWVzc2FnZVtmaWVsZF1bcnVsZUlkXSA9IHJlcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbWVzc2FnZVtmaWVsZF1bcnVsZUlkXSA9IG1zZztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgYW5kIGhpZGUgdGhlIHBhc3N3b3JkIHZhbHVlLlxuICAgICAqL1xuICAgIHRvZ2dsZVNob3dQYXNzd29yZCgpIHtcbiAgICAgICAgdGhpcy5pc1Bhc3N3b3JkU2hvdyA9ICF0aGlzLmlzUGFzc3dvcmRTaG93O1xuICAgICAgICBpZiAodGhpcy5pc1Bhc3N3b3JkU2hvdykge1xuICAgICAgICAgICAgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpKS50eXBlID0gJ3RleHQnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpKS50eXBlID0gJ3Bhc3N3b3JkJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtZXRob2QgcmV0dXJuIGlmIGEgZmllbGQgaXMgdmFsaWQgb3Igbm90XG4gICAgICogQHBhcmFtIGZpZWxkXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNFcnJvclN0eWxlKGZpZWxkOiBGb3JtR3JvdXApIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnRIYW5kbGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29tcG9uZW50SGFuZGxlci51cGdyYWRlQWxsUmVnaXN0ZXJlZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhZmllbGQudmFsaWQgJiYgZmllbGQuZGlydHkgJiYgIWZpZWxkLnByaXN0aW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgZm9ybUVycm9yIHZhbHVlc1xuICAgICAqL1xuICAgIHByaXZhdGUgaW5pdEZvcm1FcnJvcigpIHtcbiAgICAgICAgdGhpcy5mb3JtRXJyb3IgPSB7XG4gICAgICAgICAgICAndXNlcm5hbWUnOiAnJyxcbiAgICAgICAgICAgICdwYXNzd29yZCc6ICcnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdCBmb3JtIGZpZWxkcyBtZXNzYWdlc1xuICAgICAqL1xuICAgIHByaXZhdGUgaW5pdEZvcm1GaWVsZHNNZXNzYWdlcygpIHtcbiAgICAgICAgdGhpcy5fbWVzc2FnZSA9IHtcbiAgICAgICAgICAgICd1c2VybmFtZSc6IHt9LFxuICAgICAgICAgICAgJ3Bhc3N3b3JkJzoge31cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IGZvcm0gZmllbGRzIG1lc3NhZ2VzXG4gICAgICovXG4gICAgcHJpdmF0ZSBpbml0Rm9ybUZpZWxkc01lc3NhZ2VzRGVmYXVsdCgpIHtcbiAgICAgICAgdGhpcy5fbWVzc2FnZSA9IHtcbiAgICAgICAgICAgICd1c2VybmFtZSc6IHtcbiAgICAgICAgICAgICAgICAncmVxdWlyZWQnOiAnTE9HSU4uTUVTU0FHRVMuVVNFUk5BTUUtUkVRVUlSRUQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3Bhc3N3b3JkJzoge1xuICAgICAgICAgICAgICAgICdyZXF1aXJlZCc6ICdMT0dJTi5NRVNTQUdFUy5QQVNTV09SRC1SRVFVSVJFRCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuZ2V0KCdMT0dJTi5NRVNTQUdFUy5VU0VSTkFNRS1NSU4nLCAge21pbkxlbmdodDogdGhpcy5taW5MZW5naHR9KS5zdWJzY3JpYmUoKHJlczogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9tZXNzYWdlWyd1c2VybmFtZSddWydtaW5sZW5ndGgnXSA9IHJlcztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0Rm9ybUZpZWxkc0RlZmF1bHQoKSB7XG4gICAgICAgIHRoaXMuZm9ybSA9IHRoaXMuX2ZiLmdyb3VwKHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBbJycsIFZhbGlkYXRvcnMuY29tcG9zZShbVmFsaWRhdG9ycy5yZXF1aXJlZCwgVmFsaWRhdG9ycy5taW5MZW5ndGgodGhpcy5taW5MZW5naHQpXSldLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IFsnJywgVmFsaWRhdG9ycy5yZXF1aXJlZF1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzYWJsZSB0aGUgZXJyb3IgZmxhZ1xuICAgICAqL1xuICAgIHByaXZhdGUgZGlzYWJsZUVycm9yKCkge1xuICAgICAgICB0aGlzLmVycm9yID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5pdEZvcm1FcnJvcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZSB0aGUgZXJyb3IgZmxhZ1xuICAgICAqL1xuICAgIHByaXZhdGUgZW5hYmxlRXJyb3IoKSB7XG4gICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFzQ3VzdG9tRmlsZWRzVmFsaWRhdGlvbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRzVmFsaWRhdGlvbiAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbiJdfQ==

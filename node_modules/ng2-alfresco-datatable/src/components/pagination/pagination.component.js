/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("@angular/core");
var pagination_data_1 = require("../../models/pagination.data");
var PaginationComponent = PaginationComponent_1 = (function () {
    function PaginationComponent() {
        this.summary = '';
        this.supportedPageSizes = [5, 10, 20, 50, 100];
        this.maxItems = PaginationComponent_1.DEFAULT_PAGE_SIZE;
        this.changePageSize = new core_1.EventEmitter();
        this.nextPage = new core_1.EventEmitter();
        this.prevPage = new core_1.EventEmitter();
    }
    PaginationComponent.prototype.ngOnInit = function () {
        if (!this.pagination) {
            this.pagination = new pagination_data_1.PaginationData(0, 0, 0, this.maxItems, true);
        }
    };
    PaginationComponent.prototype.ngOnChanges = function (changes) {
        if (changes['pagination']) {
            if (changes['pagination'].currentValue) {
                this.pagination = changes['pagination'].currentValue;
                this.updateSummary();
            }
        }
    };
    PaginationComponent.prototype.setPageSize = function (value) {
        this.pagination.maxItems = value;
        this.updateSummary();
        this.changePageSize.emit(this.pagination);
    };
    PaginationComponent.prototype.nextPageAvail = function () {
        return this.pagination.hasMoreItems;
    };
    PaginationComponent.prototype.prevPageAvail = function () {
        return this.pagination.skipCount > 0;
    };
    PaginationComponent.prototype.showNextPage = function () {
        this.pagination.skipCount += this.pagination.maxItems;
        this.updateSummary();
        this.nextPage.emit(this.pagination);
    };
    PaginationComponent.prototype.showPrevPage = function () {
        this.pagination.skipCount -= this.pagination.maxItems;
        this.updateSummary();
        this.prevPage.emit(this.pagination);
    };
    PaginationComponent.prototype.updateSummary = function () {
        var from = this.pagination.skipCount;
        if (from === 0) {
            from = 1;
        }
        var to = this.pagination.skipCount + this.pagination.count;
        var of = this.pagination.totalItems;
        this.summary = from + "-" + to + " of " + of;
    };
    return PaginationComponent;
}());
PaginationComponent.DEFAULT_PAGE_SIZE = 20;
__decorate([
    core_1.Input(),
    __metadata("design:type", Array)
], PaginationComponent.prototype, "supportedPageSizes", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", Number)
], PaginationComponent.prototype, "maxItems", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", Object)
], PaginationComponent.prototype, "pagination", void 0);
__decorate([
    core_1.Output(),
    __metadata("design:type", core_1.EventEmitter)
], PaginationComponent.prototype, "changePageSize", void 0);
__decorate([
    core_1.Output(),
    __metadata("design:type", core_1.EventEmitter)
], PaginationComponent.prototype, "nextPage", void 0);
__decorate([
    core_1.Output(),
    __metadata("design:type", core_1.EventEmitter)
], PaginationComponent.prototype, "prevPage", void 0);
PaginationComponent = PaginationComponent_1 = __decorate([
    core_1.Component({
        moduleId: module.id,
        selector: 'alfresco-pagination',
        template: "<div class=\"mdl-paging\">     <span class=\"mdl-paging__per-page\">         <span class=\"mdl-paging__per-page-label\">Rows per page:</span>         <span class=\"mdl-paging__per-page-value\" [attr.data-automation-id]=\"'rows_per_page_' + pageSize\">{{pagination.maxItems}}</span>         <button alfresco-mdl-button id=\"pageSizePicker\" class=\"mdl-button--icon mdl-paging__per-page-dropdown\">             <i class=\"material-icons\">arrow_drop_down</i>         </button>         <ul alfresco-mdl-menu for=\"pageSizePicker\" class=\"mdl-menu--bottom-right\">             <li *ngFor=\"let size of supportedPageSizes\"                 tabindex=\"-1\" [attr.data-value]=\"size\" class=\"mdl-menu__item\"                 (click)=\"setPageSize(size)\">                 <span>{{size}}</span>             </li>         </ul>     </span>     <span class=\"mdl-paging__count\">{{summary}}</span>     <button (click)=\"showPrevPage()\"             [disabled]=\"!prevPageAvail()\"             alfresco-mdl-button class=\"mdl-button--icon mdl-paging__prev\" [attr.data-automation-id]=\"prev_page\">         <i class=\"material-icons\">keyboard_arrow_left</i>     </button>     <button (click)=\"showNextPage()\"             [disabled]=\"!nextPageAvail()\"             alfresco-mdl-button class=\"mdl-button--icon mdl-paging__next\" [attr.data-automation-id]=\"next_page\">         <i class=\"material-icons\">keyboard_arrow_right</i>     </button> </div>",
        styles: [".mdl-paging {     color: rgba(0, 0, 0, 0.54);     display: -webkit-flex;     display: -ms-flexbox;     display: flex;     -webkit-justify-content: flex-end;     -ms-flex-pack: end;     justify-content: flex-end;     -webkit-align-items: center;     -ms-flex-align: center;     align-items: center;     height: 56px;     -webkit-flex-flow: row wrap;     -ms-flex-flow: row wrap;     flex-flow: row wrap; }  .mdl-paging > * {     -webkit-flex: none;     -ms-flex: none;     flex: none; }  .mdl-list + .mdl-paging {     margin: 0; }  .mdl-paging__per-page {     position: relative; }  .mdl-paging__per-page-label {     margin-right: 40px; }  .mdl-paging__per-page-value {     position: absolute;     right: 36px;     top: 6px; }  .mdl-paging__per-page + .mdl-paging__count {     margin-left: 24px; }  .mdl-paging .mdl-menu {     min-width: 64px; }  .mdl-paging__prev:last-child {     margin-right: 44px; }  .mdl-paging__count + .mdl-paging__prev {     margin-left: 24px; }  .mdl-paging__prev + .mdl-paging__next {     margin-left: 12px; }  .mdl-paging__count + .mdl-paging__next {     margin-left: 68px; }"]
    }),
    __metadata("design:paramtypes", [])
], PaginationComponent);
exports.PaginationComponent = PaginationComponent;
var PaginationComponent_1;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7Ozs7Ozs7Ozs7O0FBRUgsc0NBQXlHO0FBQ3pHLGdFQUE4RDtBQVM5RCxJQUFhLG1CQUFtQjtJQXdCNUI7UUFwQlEsWUFBTyxHQUFXLEVBQUUsQ0FBQztRQUc3Qix1QkFBa0IsR0FBYSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUdwRCxhQUFRLEdBQVcscUJBQW1CLENBQUMsaUJBQWlCLENBQUM7UUFNekQsbUJBQWMsR0FBNkIsSUFBSSxtQkFBWSxFQUFjLENBQUM7UUFHMUUsYUFBUSxHQUE2QixJQUFJLG1CQUFZLEVBQWMsQ0FBQztRQUdwRSxhQUFRLEdBQTZCLElBQUksbUJBQVksRUFBYyxDQUFDO0lBR3BFLENBQUM7SUFFRCxzQ0FBUSxHQUFSO1FBQ0ksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUNuQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksZ0NBQWMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3ZFLENBQUM7SUFDTCxDQUFDO0lBRUQseUNBQVcsR0FBWCxVQUFZLE9BQXNCO1FBQzlCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEIsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7Z0JBQ3JDLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLFlBQVksQ0FBQztnQkFDckQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3pCLENBQUM7UUFDTCxDQUFDO0lBQ0wsQ0FBQztJQUVELHlDQUFXLEdBQVgsVUFBWSxLQUFhO1FBQ3JCLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFFRCwyQ0FBYSxHQUFiO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDO0lBQ3hDLENBQUM7SUFFRCwyQ0FBYSxHQUFiO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQsMENBQVksR0FBWjtRQUNJLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO1FBQ3RELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVELDBDQUFZLEdBQVo7UUFDSSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztRQUN0RCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFFRCwyQ0FBYSxHQUFiO1FBQ0ksSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUM7UUFDckMsRUFBRSxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDYixJQUFJLEdBQUcsQ0FBQyxDQUFDO1FBQ2IsQ0FBQztRQUNELElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDO1FBQzNELElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDO1FBQ3BDLElBQUksQ0FBQyxPQUFPLEdBQU0sSUFBSSxTQUFJLEVBQUUsWUFBTyxFQUFJLENBQUM7SUFDNUMsQ0FBQztJQUNMLDBCQUFDO0FBQUQsQ0E3RUEsQUE2RUMsSUFBQTtBQTNFVSxxQ0FBaUIsR0FBVyxFQUFFLENBQUM7QUFLdEM7SUFEQyxZQUFLLEVBQUU7OytEQUM0QztBQUdwRDtJQURDLFlBQUssRUFBRTs7cURBQ2lEO0FBR3pEO0lBREMsWUFBSyxFQUFFOzt1REFDZTtBQUd2QjtJQURDLGFBQU0sRUFBRTs4QkFDTyxtQkFBWTsyREFBOEM7QUFHMUU7SUFEQyxhQUFNLEVBQUU7OEJBQ0MsbUJBQVk7cURBQThDO0FBR3BFO0lBREMsYUFBTSxFQUFFOzhCQUNDLG1CQUFZO3FEQUE4QztBQXRCM0QsbUJBQW1CO0lBTi9CLGdCQUFTLENBQUM7UUFDUCxRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUU7UUFDbkIsUUFBUSxFQUFFLHFCQUFxQjtRQUMvQixRQUFRLEVBQUUsdzZDQUF3NkM7UUFDbDdDLE1BQU0sRUFBRSxDQUFDLGdsQ0FBZ2xDLENBQUM7S0FDN2xDLENBQUM7O0dBQ1csbUJBQW1CLENBNkUvQjtBQTdFWSxrREFBbUIiLCJmaWxlIjoiY29tcG9uZW50cy9wYWdpbmF0aW9uL3BhZ2luYXRpb24uY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgU2ltcGxlQ2hhbmdlcywgT25DaGFuZ2VzLCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBQYWdpbmF0aW9uRGF0YSB9IGZyb20gJy4uLy4uL21vZGVscy9wYWdpbmF0aW9uLmRhdGEnO1xuaW1wb3J0IHsgUGFnaW5hdGlvbiB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5cbkBDb21wb25lbnQoe1xuICAgIG1vZHVsZUlkOiBtb2R1bGUuaWQsXG4gICAgc2VsZWN0b3I6ICdhbGZyZXNjby1wYWdpbmF0aW9uJyxcbiAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJtZGwtcGFnaW5nXFxcIj4gICAgIDxzcGFuIGNsYXNzPVxcXCJtZGwtcGFnaW5nX19wZXItcGFnZVxcXCI+ICAgICAgICAgPHNwYW4gY2xhc3M9XFxcIm1kbC1wYWdpbmdfX3Blci1wYWdlLWxhYmVsXFxcIj5Sb3dzIHBlciBwYWdlOjwvc3Bhbj4gICAgICAgICA8c3BhbiBjbGFzcz1cXFwibWRsLXBhZ2luZ19fcGVyLXBhZ2UtdmFsdWVcXFwiIFthdHRyLmRhdGEtYXV0b21hdGlvbi1pZF09XFxcIidyb3dzX3Blcl9wYWdlXycgKyBwYWdlU2l6ZVxcXCI+e3twYWdpbmF0aW9uLm1heEl0ZW1zfX08L3NwYW4+ICAgICAgICAgPGJ1dHRvbiBhbGZyZXNjby1tZGwtYnV0dG9uIGlkPVxcXCJwYWdlU2l6ZVBpY2tlclxcXCIgY2xhc3M9XFxcIm1kbC1idXR0b24tLWljb24gbWRsLXBhZ2luZ19fcGVyLXBhZ2UtZHJvcGRvd25cXFwiPiAgICAgICAgICAgICA8aSBjbGFzcz1cXFwibWF0ZXJpYWwtaWNvbnNcXFwiPmFycm93X2Ryb3BfZG93bjwvaT4gICAgICAgICA8L2J1dHRvbj4gICAgICAgICA8dWwgYWxmcmVzY28tbWRsLW1lbnUgZm9yPVxcXCJwYWdlU2l6ZVBpY2tlclxcXCIgY2xhc3M9XFxcIm1kbC1tZW51LS1ib3R0b20tcmlnaHRcXFwiPiAgICAgICAgICAgICA8bGkgKm5nRm9yPVxcXCJsZXQgc2l6ZSBvZiBzdXBwb3J0ZWRQYWdlU2l6ZXNcXFwiICAgICAgICAgICAgICAgICB0YWJpbmRleD1cXFwiLTFcXFwiIFthdHRyLmRhdGEtdmFsdWVdPVxcXCJzaXplXFxcIiBjbGFzcz1cXFwibWRsLW1lbnVfX2l0ZW1cXFwiICAgICAgICAgICAgICAgICAoY2xpY2spPVxcXCJzZXRQYWdlU2l6ZShzaXplKVxcXCI+ICAgICAgICAgICAgICAgICA8c3Bhbj57e3NpemV9fTwvc3Bhbj4gICAgICAgICAgICAgPC9saT4gICAgICAgICA8L3VsPiAgICAgPC9zcGFuPiAgICAgPHNwYW4gY2xhc3M9XFxcIm1kbC1wYWdpbmdfX2NvdW50XFxcIj57e3N1bW1hcnl9fTwvc3Bhbj4gICAgIDxidXR0b24gKGNsaWNrKT1cXFwic2hvd1ByZXZQYWdlKClcXFwiICAgICAgICAgICAgIFtkaXNhYmxlZF09XFxcIiFwcmV2UGFnZUF2YWlsKClcXFwiICAgICAgICAgICAgIGFsZnJlc2NvLW1kbC1idXR0b24gY2xhc3M9XFxcIm1kbC1idXR0b24tLWljb24gbWRsLXBhZ2luZ19fcHJldlxcXCIgW2F0dHIuZGF0YS1hdXRvbWF0aW9uLWlkXT1cXFwicHJldl9wYWdlXFxcIj4gICAgICAgICA8aSBjbGFzcz1cXFwibWF0ZXJpYWwtaWNvbnNcXFwiPmtleWJvYXJkX2Fycm93X2xlZnQ8L2k+ICAgICA8L2J1dHRvbj4gICAgIDxidXR0b24gKGNsaWNrKT1cXFwic2hvd05leHRQYWdlKClcXFwiICAgICAgICAgICAgIFtkaXNhYmxlZF09XFxcIiFuZXh0UGFnZUF2YWlsKClcXFwiICAgICAgICAgICAgIGFsZnJlc2NvLW1kbC1idXR0b24gY2xhc3M9XFxcIm1kbC1idXR0b24tLWljb24gbWRsLXBhZ2luZ19fbmV4dFxcXCIgW2F0dHIuZGF0YS1hdXRvbWF0aW9uLWlkXT1cXFwibmV4dF9wYWdlXFxcIj4gICAgICAgICA8aSBjbGFzcz1cXFwibWF0ZXJpYWwtaWNvbnNcXFwiPmtleWJvYXJkX2Fycm93X3JpZ2h0PC9pPiAgICAgPC9idXR0b24+IDwvZGl2PlwiLFxuICAgIHN0eWxlczogW1wiLm1kbC1wYWdpbmcgeyAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41NCk7ICAgICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7ICAgICBkaXNwbGF5OiAtbXMtZmxleGJveDsgICAgIGRpc3BsYXk6IGZsZXg7ICAgICAtd2Via2l0LWp1c3RpZnktY29udGVudDogZmxleC1lbmQ7ICAgICAtbXMtZmxleC1wYWNrOiBlbmQ7ICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyAgICAgLXdlYmtpdC1hbGlnbi1pdGVtczogY2VudGVyOyAgICAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7ICAgICBoZWlnaHQ6IDU2cHg7ICAgICAtd2Via2l0LWZsZXgtZmxvdzogcm93IHdyYXA7ICAgICAtbXMtZmxleC1mbG93OiByb3cgd3JhcDsgICAgIGZsZXgtZmxvdzogcm93IHdyYXA7IH0gIC5tZGwtcGFnaW5nID4gKiB7ICAgICAtd2Via2l0LWZsZXg6IG5vbmU7ICAgICAtbXMtZmxleDogbm9uZTsgICAgIGZsZXg6IG5vbmU7IH0gIC5tZGwtbGlzdCArIC5tZGwtcGFnaW5nIHsgICAgIG1hcmdpbjogMDsgfSAgLm1kbC1wYWdpbmdfX3Blci1wYWdlIHsgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsgfSAgLm1kbC1wYWdpbmdfX3Blci1wYWdlLWxhYmVsIHsgICAgIG1hcmdpbi1yaWdodDogNDBweDsgfSAgLm1kbC1wYWdpbmdfX3Blci1wYWdlLXZhbHVlIHsgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgICAgIHJpZ2h0OiAzNnB4OyAgICAgdG9wOiA2cHg7IH0gIC5tZGwtcGFnaW5nX19wZXItcGFnZSArIC5tZGwtcGFnaW5nX19jb3VudCB7ICAgICBtYXJnaW4tbGVmdDogMjRweDsgfSAgLm1kbC1wYWdpbmcgLm1kbC1tZW51IHsgICAgIG1pbi13aWR0aDogNjRweDsgfSAgLm1kbC1wYWdpbmdfX3ByZXY6bGFzdC1jaGlsZCB7ICAgICBtYXJnaW4tcmlnaHQ6IDQ0cHg7IH0gIC5tZGwtcGFnaW5nX19jb3VudCArIC5tZGwtcGFnaW5nX19wcmV2IHsgICAgIG1hcmdpbi1sZWZ0OiAyNHB4OyB9ICAubWRsLXBhZ2luZ19fcHJldiArIC5tZGwtcGFnaW5nX19uZXh0IHsgICAgIG1hcmdpbi1sZWZ0OiAxMnB4OyB9ICAubWRsLXBhZ2luZ19fY291bnQgKyAubWRsLXBhZ2luZ19fbmV4dCB7ICAgICBtYXJnaW4tbGVmdDogNjhweDsgfVwiXVxufSlcbmV4cG9ydCBjbGFzcyBQYWdpbmF0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xuXG4gICAgc3RhdGljIERFRkFVTFRfUEFHRV9TSVpFOiBudW1iZXIgPSAyMDtcblxuICAgIHByaXZhdGUgc3VtbWFyeTogc3RyaW5nID0gJyc7XG5cbiAgICBASW5wdXQoKVxuICAgIHN1cHBvcnRlZFBhZ2VTaXplczogbnVtYmVyW10gPSBbNSwgMTAsIDIwLCA1MCwgMTAwXTtcblxuICAgIEBJbnB1dCgpXG4gICAgbWF4SXRlbXM6IG51bWJlciA9IFBhZ2luYXRpb25Db21wb25lbnQuREVGQVVMVF9QQUdFX1NJWkU7XG5cbiAgICBASW5wdXQoKVxuICAgIHBhZ2luYXRpb246IFBhZ2luYXRpb247XG5cbiAgICBAT3V0cHV0KClcbiAgICBjaGFuZ2VQYWdlU2l6ZTogRXZlbnRFbWl0dGVyPFBhZ2luYXRpb24+ID0gbmV3IEV2ZW50RW1pdHRlcjxQYWdpbmF0aW9uPigpO1xuXG4gICAgQE91dHB1dCgpXG4gICAgbmV4dFBhZ2U6IEV2ZW50RW1pdHRlcjxQYWdpbmF0aW9uPiA9IG5ldyBFdmVudEVtaXR0ZXI8UGFnaW5hdGlvbj4oKTtcblxuICAgIEBPdXRwdXQoKVxuICAgIHByZXZQYWdlOiBFdmVudEVtaXR0ZXI8UGFnaW5hdGlvbj4gPSBuZXcgRXZlbnRFbWl0dGVyPFBhZ2luYXRpb24+KCk7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhZ2luYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbiA9IG5ldyBQYWdpbmF0aW9uRGF0YSgwLCAwLCAwLCB0aGlzLm1heEl0ZW1zLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYW5nZXNbJ3BhZ2luYXRpb24nXSkge1xuICAgICAgICAgICAgaWYgKGNoYW5nZXNbJ3BhZ2luYXRpb24nXS5jdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2luYXRpb24gPSBjaGFuZ2VzWydwYWdpbmF0aW9uJ10uY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3VtbWFyeSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0UGFnZVNpemUodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLnBhZ2luYXRpb24ubWF4SXRlbXMgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVTdW1tYXJ5KCk7XG4gICAgICAgIHRoaXMuY2hhbmdlUGFnZVNpemUuZW1pdCh0aGlzLnBhZ2luYXRpb24pO1xuICAgIH1cblxuICAgIG5leHRQYWdlQXZhaWwoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhZ2luYXRpb24uaGFzTW9yZUl0ZW1zO1xuICAgIH1cblxuICAgIHByZXZQYWdlQXZhaWwoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhZ2luYXRpb24uc2tpcENvdW50ID4gMDtcbiAgICB9XG5cbiAgICBzaG93TmV4dFBhZ2UoKSB7XG4gICAgICAgIHRoaXMucGFnaW5hdGlvbi5za2lwQ291bnQgKz0gdGhpcy5wYWdpbmF0aW9uLm1heEl0ZW1zO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1bW1hcnkoKTtcbiAgICAgICAgdGhpcy5uZXh0UGFnZS5lbWl0KHRoaXMucGFnaW5hdGlvbik7XG4gICAgfVxuXG4gICAgc2hvd1ByZXZQYWdlKCkge1xuICAgICAgICB0aGlzLnBhZ2luYXRpb24uc2tpcENvdW50IC09IHRoaXMucGFnaW5hdGlvbi5tYXhJdGVtcztcbiAgICAgICAgdGhpcy51cGRhdGVTdW1tYXJ5KCk7XG4gICAgICAgIHRoaXMucHJldlBhZ2UuZW1pdCh0aGlzLnBhZ2luYXRpb24pO1xuICAgIH1cblxuICAgIHVwZGF0ZVN1bW1hcnkoKSB7XG4gICAgICAgIGxldCBmcm9tID0gdGhpcy5wYWdpbmF0aW9uLnNraXBDb3VudDtcbiAgICAgICAgaWYgKGZyb20gPT09IDApIHtcbiAgICAgICAgICAgIGZyb20gPSAxO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0byA9IHRoaXMucGFnaW5hdGlvbi5za2lwQ291bnQgKyB0aGlzLnBhZ2luYXRpb24uY291bnQ7XG4gICAgICAgIGxldCBvZiA9IHRoaXMucGFnaW5hdGlvbi50b3RhbEl0ZW1zO1xuICAgICAgICB0aGlzLnN1bW1hcnkgPSBgJHtmcm9tfS0ke3RvfSBvZiAke29mfWA7XG4gICAgfVxufVxuIl19

/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("@angular/core");
var number_widget_1 = require("./../number/number.widget");
var report_model_1 = require("./../../../models/report.model");
var forms_1 = require("@angular/forms");
var DurationWidget = (function (_super) {
    __extends(DurationWidget, _super);
    function DurationWidget(elementRef) {
        var _this = _super.call(this, elementRef) || this;
        _this.elementRef = elementRef;
        _this.required = false;
        return _this;
    }
    DurationWidget.prototype.ngOnInit = function () {
        var timeType = new forms_1.FormControl();
        this.formGroup.addControl('timeType', timeType);
        if (this.required) {
            this.formGroup.get(this.controllerName).setValidators(forms_1.Validators.required);
        }
        if (this.field.value === null) {
            this.field.value = 0;
        }
        var paramOptions = [];
        paramOptions.push(new report_model_1.ParameterValueModel({ id: '1', name: 'Seconds' }));
        paramOptions.push(new report_model_1.ParameterValueModel({ id: '60', name: 'Minutes' }));
        paramOptions.push(new report_model_1.ParameterValueModel({ id: '3600', name: 'Hours' }));
        paramOptions.push(new report_model_1.ParameterValueModel({ id: '86400', name: 'Days', selected: true }));
        this.duration = new report_model_1.ReportParameterDetailsModel({ id: 'duration', name: 'duration', options: paramOptions });
        this.duration.value = paramOptions[0].id;
    };
    DurationWidget.prototype.calculateDuration = function () {
        if (this.field && this.duration.value) {
            this.currentValue = parseInt(this.field.value, 10) * parseInt(this.duration.value, 10);
            this.formGroup.get(this.controllerName).setValue(this.currentValue);
            this.fieldChanged.emit({ value: this.currentValue });
        }
    };
    return DurationWidget;
}(number_widget_1.NumberWidget));
__decorate([
    core_1.Input(),
    __metadata("design:type", Object)
], DurationWidget.prototype, "field", void 0);
__decorate([
    core_1.Input('group'),
    __metadata("design:type", forms_1.FormGroup)
], DurationWidget.prototype, "formGroup", void 0);
__decorate([
    core_1.Input('controllerName'),
    __metadata("design:type", String)
], DurationWidget.prototype, "controllerName", void 0);
__decorate([
    core_1.Input(),
    __metadata("design:type", Boolean)
], DurationWidget.prototype, "required", void 0);
DurationWidget = __decorate([
    core_1.Component({
        moduleId: module.id,
        selector: 'duration-widget',
        template: "<div class=\"mdl-grid\">     <div class=\"mdl-cell mdl-cell--6-col\">         <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label number-widget\">             <input class=\"mdl-textfield__input\"                    type=\"text\"                    pattern=\"-?[0-9]*(\\.[0-9]+)?\"                    [attr.id]=\"field.id\"                    [value]=\"field.value\"                    [(ngModel)]=\"field.value\"                    (ngModelChange)=\"calculateDuration()\">             <label class=\"mdl-textfield__label\" [attr.for]=\"field.id\">{{field.nameKey | translate}}</label>         </div>     </div>     <div class=\"mdl-cell mdl-cell--6-col\">         <div style=\"margin-top: 30px\">             <dropdown-widget [field]=\"duration\" [group]=\"formGroup\" [controllerName]=\"'timeType'\"                              [showDefaultOption]=\"false\"                              (fieldChanged)=\"calculateDuration()\"></dropdown-widget>         </div>     </div> </div>",
        styles: [".number-widget {     width: 100%; }  .number-widget__invalid .mdl-textfield__input {     border-color: #d50000; }  .number-widget__invalid .mdl-textfield__label {     color: #d50000; }  .number-widget__invalid .mdl-textfield__label:after {     background-color: #d50000; }  .number-widget__invalid .mdl-textfield__error {     visibility: visible !important; }"]
    }),
    __metadata("design:paramtypes", [core_1.ElementRef])
], DurationWidget);
exports.DurationWidget = DurationWidget;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvd2lkZ2V0cy9kdXJhdGlvbi9kdXJhdGlvbi53aWRnZXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHOzs7Ozs7Ozs7Ozs7Ozs7O0FBRUgsc0NBQXFFO0FBQ3JFLDJEQUF5RDtBQUN6RCwrREFBa0c7QUFDbEcsd0NBQW9FO0FBUXBFLElBQWEsY0FBYztJQUFTLGtDQUFZO0lBbUI1Qyx3QkFBbUIsVUFBc0I7UUFBekMsWUFDSSxrQkFBTSxVQUFVLENBQUMsU0FDcEI7UUFGa0IsZ0JBQVUsR0FBVixVQUFVLENBQVk7UUFQekMsY0FBUSxHQUFZLEtBQUssQ0FBQzs7SUFTMUIsQ0FBQztJQUVELGlDQUFRLEdBQVI7UUFDSSxJQUFJLFFBQVEsR0FBRyxJQUFJLG1CQUFXLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFFaEQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDaEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxrQkFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQy9FLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRUQsSUFBSSxZQUFZLEdBQTBCLEVBQUUsQ0FBQztRQUM3QyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksa0NBQW1CLENBQUMsRUFBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkUsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLGtDQUFtQixDQUFDLEVBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hFLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxrQ0FBbUIsQ0FBQyxFQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUMsQ0FBQztRQUN4RSxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksa0NBQW1CLENBQUMsRUFBQyxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUMsQ0FBQztRQUV4RixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksMENBQTJCLENBQUMsRUFBQyxFQUFFLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBQyxDQUFDLENBQUM7UUFDM0csSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUM3QyxDQUFDO0lBRU0sMENBQWlCLEdBQXhCO1FBQ0ksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQU0sQ0FBQyxDQUFDLENBQUM7WUFDckMsSUFBSSxDQUFDLFlBQVksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZGLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ3BFLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUMsQ0FBQyxDQUFDO1FBQ3ZELENBQUM7SUFDTCxDQUFDO0lBRUwscUJBQUM7QUFBRCxDQXBEQSxBQW9EQyxDQXBEbUMsNEJBQVksR0FvRC9DO0FBakRHO0lBREMsWUFBSyxFQUFFOzs2Q0FDRztBQUdYO0lBREMsWUFBSyxDQUFDLE9BQU8sQ0FBQzs4QkFDRyxpQkFBUztpREFBQztBQUc1QjtJQURDLFlBQUssQ0FBQyxnQkFBZ0IsQ0FBQzs7c0RBQ007QUFHOUI7SUFEQyxZQUFLLEVBQUU7O2dEQUNrQjtBQVpqQixjQUFjO0lBTjFCLGdCQUFTLENBQUM7UUFDUCxRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUU7UUFDbkIsUUFBUSxFQUFFLGlCQUFpQjtRQUMzQixRQUFRLEVBQUUsNCtCQUE0K0I7UUFDdC9CLE1BQU0sRUFBRSxDQUFDLHlXQUF5VyxDQUFDO0tBQ3RYLENBQUM7cUNBb0JpQyxpQkFBVTtHQW5CaEMsY0FBYyxDQW9EMUI7QUFwRFksd0NBQWMiLCJmaWxlIjoiY29tcG9uZW50cy93aWRnZXRzL2R1cmF0aW9uL2R1cmF0aW9uLndpZGdldC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgRWxlbWVudFJlZiwgT25Jbml0LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTnVtYmVyV2lkZ2V0IH0gZnJvbSAnLi8uLi9udW1iZXIvbnVtYmVyLndpZGdldCc7XG5pbXBvcnQgeyBSZXBvcnRQYXJhbWV0ZXJEZXRhaWxzTW9kZWwsIFBhcmFtZXRlclZhbHVlTW9kZWwgfSBmcm9tICcuLy4uLy4uLy4uL21vZGVscy9yZXBvcnQubW9kZWwnO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2wsIEZvcm1Hcm91cCwgVmFsaWRhdG9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuQENvbXBvbmVudCh7XG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICBzZWxlY3RvcjogJ2R1cmF0aW9uLXdpZGdldCcsXG4gICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz1cXFwibWRsLWdyaWRcXFwiPiAgICAgPGRpdiBjbGFzcz1cXFwibWRsLWNlbGwgbWRsLWNlbGwtLTYtY29sXFxcIj4gICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZGwtdGV4dGZpZWxkIG1kbC1qcy10ZXh0ZmllbGQgbWRsLXRleHRmaWVsZC0tZmxvYXRpbmctbGFiZWwgbnVtYmVyLXdpZGdldFxcXCI+ICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwibWRsLXRleHRmaWVsZF9faW5wdXRcXFwiICAgICAgICAgICAgICAgICAgICB0eXBlPVxcXCJ0ZXh0XFxcIiAgICAgICAgICAgICAgICAgICAgcGF0dGVybj1cXFwiLT9bMC05XSooXFxcXC5bMC05XSspP1xcXCIgICAgICAgICAgICAgICAgICAgIFthdHRyLmlkXT1cXFwiZmllbGQuaWRcXFwiICAgICAgICAgICAgICAgICAgICBbdmFsdWVdPVxcXCJmaWVsZC52YWx1ZVxcXCIgICAgICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVxcXCJmaWVsZC52YWx1ZVxcXCIgICAgICAgICAgICAgICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cXFwiY2FsY3VsYXRlRHVyYXRpb24oKVxcXCI+ICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cXFwibWRsLXRleHRmaWVsZF9fbGFiZWxcXFwiIFthdHRyLmZvcl09XFxcImZpZWxkLmlkXFxcIj57e2ZpZWxkLm5hbWVLZXkgfCB0cmFuc2xhdGV9fTwvbGFiZWw+ICAgICAgICAgPC9kaXY+ICAgICA8L2Rpdj4gICAgIDxkaXYgY2xhc3M9XFxcIm1kbC1jZWxsIG1kbC1jZWxsLS02LWNvbFxcXCI+ICAgICAgICAgPGRpdiBzdHlsZT1cXFwibWFyZ2luLXRvcDogMzBweFxcXCI+ICAgICAgICAgICAgIDxkcm9wZG93bi13aWRnZXQgW2ZpZWxkXT1cXFwiZHVyYXRpb25cXFwiIFtncm91cF09XFxcImZvcm1Hcm91cFxcXCIgW2NvbnRyb2xsZXJOYW1lXT1cXFwiJ3RpbWVUeXBlJ1xcXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc2hvd0RlZmF1bHRPcHRpb25dPVxcXCJmYWxzZVxcXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZmllbGRDaGFuZ2VkKT1cXFwiY2FsY3VsYXRlRHVyYXRpb24oKVxcXCI+PC9kcm9wZG93bi13aWRnZXQ+ICAgICAgICAgPC9kaXY+ICAgICA8L2Rpdj4gPC9kaXY+XCIsXG4gICAgc3R5bGVzOiBbXCIubnVtYmVyLXdpZGdldCB7ICAgICB3aWR0aDogMTAwJTsgfSAgLm51bWJlci13aWRnZXRfX2ludmFsaWQgLm1kbC10ZXh0ZmllbGRfX2lucHV0IHsgICAgIGJvcmRlci1jb2xvcjogI2Q1MDAwMDsgfSAgLm51bWJlci13aWRnZXRfX2ludmFsaWQgLm1kbC10ZXh0ZmllbGRfX2xhYmVsIHsgICAgIGNvbG9yOiAjZDUwMDAwOyB9ICAubnVtYmVyLXdpZGdldF9faW52YWxpZCAubWRsLXRleHRmaWVsZF9fbGFiZWw6YWZ0ZXIgeyAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Q1MDAwMDsgfSAgLm51bWJlci13aWRnZXRfX2ludmFsaWQgLm1kbC10ZXh0ZmllbGRfX2Vycm9yIHsgICAgIHZpc2liaWxpdHk6IHZpc2libGUgIWltcG9ydGFudDsgfVwiXVxufSlcbmV4cG9ydCBjbGFzcyBEdXJhdGlvbldpZGdldCBleHRlbmRzIE51bWJlcldpZGdldCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgICBASW5wdXQoKVxuICAgIGZpZWxkOiBhbnk7XG5cbiAgICBASW5wdXQoJ2dyb3VwJylcbiAgICBwdWJsaWMgZm9ybUdyb3VwOiBGb3JtR3JvdXA7XG5cbiAgICBASW5wdXQoJ2NvbnRyb2xsZXJOYW1lJylcbiAgICBwdWJsaWMgY29udHJvbGxlck5hbWU6IHN0cmluZztcblxuICAgIEBJbnB1dCgpXG4gICAgcmVxdWlyZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGR1cmF0aW9uOiBSZXBvcnRQYXJhbWV0ZXJEZXRhaWxzTW9kZWw7XG4gICAgY3VycmVudFZhbHVlOiBudW1iZXI7XG5cbiAgICBwdWJsaWMgc2VsZWN0aW9uR3JvdXA6IEZvcm1Hcm91cDtcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBlbGVtZW50UmVmOiBFbGVtZW50UmVmKSB7XG4gICAgICAgIHN1cGVyKGVsZW1lbnRSZWYpO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBsZXQgdGltZVR5cGUgPSBuZXcgRm9ybUNvbnRyb2woKTtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuYWRkQ29udHJvbCgndGltZVR5cGUnLCB0aW1lVHlwZSk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVxdWlyZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLmNvbnRyb2xsZXJOYW1lKS5zZXRWYWxpZGF0b3JzKFZhbGlkYXRvcnMucmVxdWlyZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZpZWxkLnZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmZpZWxkLnZhbHVlID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwYXJhbU9wdGlvbnM6IFBhcmFtZXRlclZhbHVlTW9kZWxbXSA9IFtdO1xuICAgICAgICBwYXJhbU9wdGlvbnMucHVzaChuZXcgUGFyYW1ldGVyVmFsdWVNb2RlbCh7aWQ6ICcxJywgbmFtZTogJ1NlY29uZHMnfSkpO1xuICAgICAgICBwYXJhbU9wdGlvbnMucHVzaChuZXcgUGFyYW1ldGVyVmFsdWVNb2RlbCh7aWQ6ICc2MCcsIG5hbWU6ICdNaW51dGVzJ30pKTtcbiAgICAgICAgcGFyYW1PcHRpb25zLnB1c2gobmV3IFBhcmFtZXRlclZhbHVlTW9kZWwoe2lkOiAnMzYwMCcsIG5hbWU6ICdIb3Vycyd9KSk7XG4gICAgICAgIHBhcmFtT3B0aW9ucy5wdXNoKG5ldyBQYXJhbWV0ZXJWYWx1ZU1vZGVsKHtpZDogJzg2NDAwJywgbmFtZTogJ0RheXMnLCBzZWxlY3RlZDogdHJ1ZX0pKTtcblxuICAgICAgICB0aGlzLmR1cmF0aW9uID0gbmV3IFJlcG9ydFBhcmFtZXRlckRldGFpbHNNb2RlbCh7aWQ6ICdkdXJhdGlvbicsIG5hbWU6ICdkdXJhdGlvbicsIG9wdGlvbnM6IHBhcmFtT3B0aW9uc30pO1xuICAgICAgICB0aGlzLmR1cmF0aW9uLnZhbHVlID0gcGFyYW1PcHRpb25zWzBdLmlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVEdXJhdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuZmllbGQgJiYgdGhpcy5kdXJhdGlvbi52YWx1ZSApIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gcGFyc2VJbnQodGhpcy5maWVsZC52YWx1ZSwgMTApICogcGFyc2VJbnQodGhpcy5kdXJhdGlvbi52YWx1ZSwgMTApO1xuICAgICAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuY29udHJvbGxlck5hbWUpLnNldFZhbHVlKHRoaXMuY3VycmVudFZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZmllbGRDaGFuZ2VkLmVtaXQoe3ZhbHVlOiB0aGlzLmN1cnJlbnRWYWx1ZX0pO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4iXX0=

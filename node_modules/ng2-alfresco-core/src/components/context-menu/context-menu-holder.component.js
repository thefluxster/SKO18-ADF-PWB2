/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("@angular/core");
var context_menu_service_1 = require("./context-menu.service");
var ContextMenuHolderComponent = (function () {
    function ContextMenuHolderComponent(_contextMenuService) {
        var _this = this;
        this._contextMenuService = _contextMenuService;
        this.links = [];
        this.isShown = false;
        this.mouseLocation = { left: 0, top: 0 };
        _contextMenuService.show.subscribe(function (e) { return _this.showMenu(e.event, e.obj); });
    }
    Object.defineProperty(ContextMenuHolderComponent.prototype, "locationCss", {
        get: function () {
            return {
                position: 'fixed',
                display: this.isShown ? 'block' : 'none',
                left: this.mouseLocation.left + 'px',
                top: this.mouseLocation.top + 'px'
            };
        },
        enumerable: true,
        configurable: true
    });
    ContextMenuHolderComponent.prototype.clickedOutside = function () {
        this.isShown = false;
    };
    ContextMenuHolderComponent.prototype.showMenu = function (e, links) {
        this.isShown = true;
        this.links = links;
        if (e) {
            this.mouseLocation = {
                left: e.clientX,
                top: e.clientY
            };
        }
    };
    ContextMenuHolderComponent.prototype.onShowContextMenu = function (event) {
        if (event) {
            event.preventDefault();
        }
    };
    return ContextMenuHolderComponent;
}());
__decorate([
    core_1.HostListener('document:click'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], ContextMenuHolderComponent.prototype, "clickedOutside", null);
__decorate([
    core_1.HostListener('contextmenu', ['$event']),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [MouseEvent]),
    __metadata("design:returntype", void 0)
], ContextMenuHolderComponent.prototype, "onShowContextMenu", null);
ContextMenuHolderComponent = __decorate([
    core_1.Component({
        selector: 'context-menu-holder',
        styles: [
            "\n        .menu-container {\n            background: #fff;\n            display: block;\n            margin: 0;\n            padding: 0;\n            border: none;\n            overflow: visible;\n            z-index: 9999;\n        }\n\n        .context-menu {\n            list-style-type: none;\n            position: static;\n            height: auto;\n            width: auto;\n            min-width: 124px;\n            padding: 8px 0;\n            margin: 0;\n            box-shadow: 0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12);\n            border-radius: 2px;\n        }\n\n        .context-menu .link {\n            opacity: 1;\n        }\n        "
        ],
        template: "\n        <div [ngStyle]=\"locationCss\" class=\"menu-container\">\n            <ul class=\"context-menu\">\n                <li (click)=\"link.subject.next(link)\" class=\"mdl-menu__item link\" *ngFor=\"let link of links\">\n                    {{link.title || link.model?.title}}\n                </li>\n            </ul>\n        </div>\n    "
    }),
    __metadata("design:paramtypes", [context_menu_service_1.ContextMenuService])
], ContextMenuHolderComponent);
exports.ContextMenuHolderComponent = ContextMenuHolderComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29udGV4dC1tZW51L2NvbnRleHQtbWVudS1ob2xkZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRzs7Ozs7Ozs7Ozs7QUFFSCxzQ0FBd0Q7QUFDeEQsK0RBQTREO0FBMkM1RCxJQUFhLDBCQUEwQjtJQUtuQyxvQ0FBb0IsbUJBQXVDO1FBQTNELGlCQUVDO1FBRm1CLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBb0I7UUFKM0QsVUFBSyxHQUFHLEVBQUUsQ0FBQztRQUNYLFlBQU8sR0FBRyxLQUFLLENBQUM7UUFDUixrQkFBYSxHQUFrQyxFQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBQyxDQUFDO1FBR3JFLG1CQUFtQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxLQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUE3QixDQUE2QixDQUFDLENBQUM7SUFDM0UsQ0FBQztJQUVELHNCQUFJLG1EQUFXO2FBQWY7WUFDSSxNQUFNLENBQUM7Z0JBQ0gsUUFBUSxFQUFFLE9BQU87Z0JBQ2pCLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sR0FBRyxNQUFNO2dCQUN4QyxJQUFJLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEdBQUcsSUFBSTtnQkFDcEMsR0FBRyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxHQUFHLElBQUk7YUFDckMsQ0FBQztRQUNOLENBQUM7OztPQUFBO0lBR0QsbURBQWMsR0FBZDtRQUNJLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO0lBQ3pCLENBQUM7SUFFRCw2Q0FBUSxHQUFSLFVBQVMsQ0FBQyxFQUFFLEtBQUs7UUFDYixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUVuQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ0osSUFBSSxDQUFDLGFBQWEsR0FBRztnQkFDakIsSUFBSSxFQUFFLENBQUMsQ0FBQyxPQUFPO2dCQUNmLEdBQUcsRUFBRSxDQUFDLENBQUMsT0FBTzthQUNqQixDQUFDO1FBQ04sQ0FBQztJQUNMLENBQUM7SUFHRCxzREFBaUIsR0FBakIsVUFBa0IsS0FBa0I7UUFDaEMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNSLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUMzQixDQUFDO0lBQ0wsQ0FBQztJQUNMLGlDQUFDO0FBQUQsQ0F6Q0EsQUF5Q0MsSUFBQTtBQXRCRztJQURDLG1CQUFZLENBQUMsZ0JBQWdCLENBQUM7Ozs7Z0VBRzlCO0FBZUQ7SUFEQyxtQkFBWSxDQUFDLGFBQWEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDOztxQ0FDZCxVQUFVOzttRUFJbkM7QUF4Q1EsMEJBQTBCO0lBekN0QyxnQkFBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLHFCQUFxQjtRQUMvQixNQUFNLEVBQUU7WUFDSiw4ckJBMEJDO1NBQ0o7UUFDRCxRQUFRLEVBQUUsMlZBUVQ7S0FDSixDQUFDO3FDQU0yQyx5Q0FBa0I7R0FMbEQsMEJBQTBCLENBeUN0QztBQXpDWSxnRUFBMEIiLCJmaWxlIjoiY29tcG9uZW50cy9jb250ZXh0LW1lbnUvY29udGV4dC1tZW51LWhvbGRlci5jb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIEhvc3RMaXN0ZW5lciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udGV4dE1lbnVTZXJ2aWNlIH0gZnJvbSAnLi9jb250ZXh0LW1lbnUuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnY29udGV4dC1tZW51LWhvbGRlcicsXG4gICAgc3R5bGVzOiBbXG4gICAgICAgIGBcbiAgICAgICAgLm1lbnUtY29udGFpbmVyIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgICAgICAgIHotaW5kZXg6IDk5OTk7XG4gICAgICAgIH1cblxuICAgICAgICAuY29udGV4dC1tZW51IHtcbiAgICAgICAgICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBzdGF0aWM7XG4gICAgICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgICAgICB3aWR0aDogYXV0bztcbiAgICAgICAgICAgIG1pbi13aWR0aDogMTI0cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHggMDtcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDJweCAwIHJnYmEoMCwwLDAsLjE0KSwwIDNweCAxcHggLTJweCByZ2JhKDAsMCwwLC4yKSwwIDFweCA1cHggMCByZ2JhKDAsMCwwLC4xMik7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuY29udGV4dC1tZW51IC5saW5rIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIH1cbiAgICAgICAgYFxuICAgIF0sXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGRpdiBbbmdTdHlsZV09XCJsb2NhdGlvbkNzc1wiIGNsYXNzPVwibWVudS1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDx1bCBjbGFzcz1cImNvbnRleHQtbWVudVwiPlxuICAgICAgICAgICAgICAgIDxsaSAoY2xpY2spPVwibGluay5zdWJqZWN0Lm5leHQobGluaylcIiBjbGFzcz1cIm1kbC1tZW51X19pdGVtIGxpbmtcIiAqbmdGb3I9XCJsZXQgbGluayBvZiBsaW5rc1wiPlxuICAgICAgICAgICAgICAgICAgICB7e2xpbmsudGl0bGUgfHwgbGluay5tb2RlbD8udGl0bGV9fVxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICA8L2Rpdj5cbiAgICBgXG59KVxuZXhwb3J0IGNsYXNzIENvbnRleHRNZW51SG9sZGVyQ29tcG9uZW50IHtcbiAgICBsaW5rcyA9IFtdO1xuICAgIGlzU2hvd24gPSBmYWxzZTtcbiAgICBwcml2YXRlIG1vdXNlTG9jYXRpb246IHsgbGVmdDogbnVtYmVyLCB0b3A6IG51bWJlciB9ID0ge2xlZnQ6IDAsIHRvcDogMH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9jb250ZXh0TWVudVNlcnZpY2U6IENvbnRleHRNZW51U2VydmljZSkge1xuICAgICAgICBfY29udGV4dE1lbnVTZXJ2aWNlLnNob3cuc3Vic2NyaWJlKGUgPT4gdGhpcy5zaG93TWVudShlLmV2ZW50LCBlLm9iaikpO1xuICAgIH1cblxuICAgIGdldCBsb2NhdGlvbkNzcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgICAgICAgZGlzcGxheTogdGhpcy5pc1Nob3duID8gJ2Jsb2NrJyA6ICdub25lJyxcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMubW91c2VMb2NhdGlvbi5sZWZ0ICsgJ3B4JyxcbiAgICAgICAgICAgIHRvcDogdGhpcy5tb3VzZUxvY2F0aW9uLnRvcCArICdweCdcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDpjbGljaycpXG4gICAgY2xpY2tlZE91dHNpZGUoKSB7XG4gICAgICAgIHRoaXMuaXNTaG93biA9IGZhbHNlO1xuICAgIH1cblxuICAgIHNob3dNZW51KGUsIGxpbmtzKSB7XG4gICAgICAgIHRoaXMuaXNTaG93biA9IHRydWU7XG4gICAgICAgIHRoaXMubGlua3MgPSBsaW5rcztcblxuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgdGhpcy5tb3VzZUxvY2F0aW9uID0ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IGUuY2xpZW50WCxcbiAgICAgICAgICAgICAgICB0b3A6IGUuY2xpZW50WVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBIb3N0TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgWyckZXZlbnQnXSlcbiAgICBvblNob3dDb250ZXh0TWVudShldmVudD86IE1vdXNlRXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19

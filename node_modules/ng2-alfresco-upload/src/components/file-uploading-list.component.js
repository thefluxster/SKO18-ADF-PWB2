/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("@angular/core");
var FileUploadingListComponent = (function () {
    function FileUploadingListComponent(el) {
        this.el = el;
    }
    FileUploadingListComponent.prototype.abort = function (id) {
        var file = this.filesUploadingList.filter(function (uploadingFileModel) {
            return uploadingFileModel.id === id;
        });
        file[0].emitAbort();
    };
    FileUploadingListComponent.prototype.cancelAllFiles = function ($event) {
        if ($event) {
            $event.preventDefault();
        }
        this.filesUploadingList.forEach(function (uploadingFileModel) {
            uploadingFileModel.emitAbort();
        });
    };
    FileUploadingListComponent.prototype.isUploadCompleted = function () {
        var isPending = false;
        var isAllCompleted = true;
        for (var i = 0; i < this.filesUploadingList.length && !isPending; i++) {
            var uploadingFileModel = this.filesUploadingList[i];
            if (!uploadingFileModel.done && !uploadingFileModel.abort) {
                isPending = true;
                isAllCompleted = false;
            }
        }
        return isAllCompleted;
    };
    return FileUploadingListComponent;
}());
__decorate([
    core_1.Input(),
    __metadata("design:type", Array)
], FileUploadingListComponent.prototype, "filesUploadingList", void 0);
FileUploadingListComponent = __decorate([
    core_1.Component({
        selector: 'alfresco-file-uploading-list',
        moduleId: module.id,
        template: "<div [ngClass]=\"{hide:  isUploadCompleted()}\" [ngClass]=\"{show:   !isUploadCompleted()}\"      class=\"body-dialog-header\">     <div class=\"body-dialog-action\"></div>     <div class=\"body-dialog-cancel\"><a data-automation-id=\"cancel_upload_all\" href=\"#\" (click)=\"cancelAllFiles($event)\">{{'FILE_UPLOAD.BUTTON.CANCEL' | translate}}</a></div> </div> <table class=\"mdl-data-table mdl-js-data-table mdl-shadow--2dp\">     <tr>         <th>{{'FILE_UPLOAD.FILE_INFO.NAME' | translate}}</th>         <th>{{'FILE_UPLOAD.FILE_INFO.PROGRESS' | translate}}</th>         <th class=\"mdl-cell--hide-phone size-column\">{{'FILE_UPLOAD.FILE_INFO.SIZE' | translate}}</th>         <th>{{'FILE_UPLOAD.FILE_INFO.ACTION' | translate}}</th>     </tr>     <tr *ngFor=\"let file of filesUploadingList\" tabindex=\"0\">         <td attr.data-automation-id=\"dialog_{{file.name}}\" class=\"mdl-data-table__cell--non-numeric\"><div class=\"truncate\">{{file.name}}</div></td>         <td _ngcontent-hvq-3=\"\">             <div _ngcontent-hvq-3=\"\" class=\"mdl-progress mdl-js-progress is-upgraded\" id=\"{{file.id}}\"                  data-upgraded=\",MaterialProgress\">                 <div class=\"progressbar bar bar1\" attr.data-automation-id=\"dialog_progress_{{file.name}}\" [style.width.%]=\"file.progress.percent\"></div>                 <div class=\"bufferbar bar bar2\" style=\"width: 100%;\"></div>                 <div class=\"auxbar bar bar3\" style=\"width: 0%;\"></div>             </div>         </td>         <td class=\"mdl-data-table__cell--non-numeric mdl-cell--hide-phone size-column\" attr.data-automation-id=\"{{file.name}}_filesize\">{{file.size}}</td>         <td>             <span *ngIf=\"file.done && !file.abort\" ><i data-automation-id=\"done_icon\" class=\"material-icons action-icons\">done</i></span>             <span *ngIf=\"file.uploading\" (click)=\"abort(file.id)\" class=\"cursor\" tabindex=\"0\"><i data-automation-id=\"abort_cancel_upload\"                                                                                      class=\"material-icons action-icons\">                 remove_circle_outline</i></span>             <span *ngIf=\"file.abort\"><i class=\"material-icons action-icons\" data-automation-id=\"upload_stopped\" tabindex=\"0\">remove_circle</i></span>         </td>     </tr> </table>",
        styles: [".mdl-data-table {     width: 100%;     border: 0px; }  .cursor {     cursor: pointer; }  .body-dialog-header {     display: -webkit-box;     display: -moz-box;     display: -ms-flexbox;     display: -webkit-flex;     display: flex;     background-color: #f5f5f5;     border-bottom: solid 1px #eee;     height: 30px;     line-height: 30px; }  .body-dialog-action {     -webkit-flex: 1 1 auto;     flex: 1 1 auto;     overflow: hidden;     padding: 0 18px;     text-overflow: ellipsis;     white-space: nowrap;     word-wrap: break-word; }  .body-dialog-cancel {     -webkit-flex: none;     flex: none;     display: inline;     padding-right: 13px;     text-align: right; }  .action-icons {     text-align: center;     width: 100%; } :host .truncate {     margin-left: auto;     white-space: nowrap;     overflow: hidden;     text-overflow: ellipsis; }  :host .mdl-progress{     width: 150px; }  @media (max-device-width: 360px){     .truncate {         max-width: 50px;         margin-left: 0px;     } }  @media (max-device-width: 568px) {     .truncate {         width: 60px;     }     .mdl-progress {         width: 60px;     } }  @media (max-width: 740px) {     .truncate {         max-width: 80px;     }      .mdl-progress {         max-width: 70px;     }      .size-column {         display: none;     } }  @media (min-width: 740px) {     .truncate {         width: 249px;     }      .size-column {         display: table-cell;     } }"]
    }),
    __metadata("design:paramtypes", [core_1.ElementRef])
], FileUploadingListComponent);
exports.FileUploadingListComponent = FileUploadingListComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZmlsZS11cGxvYWRpbmctbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHOzs7Ozs7Ozs7OztBQUVILHNDQUE2RDtBQW1CN0QsSUFBYSwwQkFBMEI7SUFLbkMsb0NBQW1CLEVBQWM7UUFBZCxPQUFFLEdBQUYsRUFBRSxDQUFZO0lBQ2pDLENBQUM7SUFPRCwwQ0FBSyxHQUFMLFVBQU0sRUFBVTtRQUNaLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsVUFBQyxrQkFBa0I7WUFDekQsTUFBTSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUM7UUFDeEMsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUtELG1EQUFjLEdBQWQsVUFBZSxNQUFNO1FBQ2pCLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDVCxNQUFNLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDNUIsQ0FBQztRQUNELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsVUFBQyxrQkFBNkI7WUFDMUQsa0JBQWtCLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBTUQsc0RBQWlCLEdBQWpCO1FBQ0ksSUFBSSxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksY0FBYyxHQUFHLElBQUksQ0FBQztRQUMxQixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNwRSxJQUFJLGtCQUFrQixHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwRCxFQUFFLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ3hELFNBQVMsR0FBRyxJQUFJLENBQUM7Z0JBQ2pCLGNBQWMsR0FBRyxLQUFLLENBQUM7WUFDM0IsQ0FBQztRQUNMLENBQUM7UUFDRCxNQUFNLENBQUMsY0FBYyxDQUFDO0lBQzFCLENBQUM7SUFDTCxpQ0FBQztBQUFELENBaERBLEFBZ0RDLElBQUE7QUE3Q0c7SUFEQyxZQUFLLEVBQUU7O3NFQUN5QjtBQUh4QiwwQkFBMEI7SUFOdEMsZ0JBQVMsQ0FBQztRQUNQLFFBQVEsRUFBRSw4QkFBOEI7UUFDeEMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1FBQ25CLFFBQVEsRUFBRSxteUVBQW15RTtRQUM3eUUsTUFBTSxFQUFFLENBQUMsaTZDQUFpNkMsQ0FBQztLQUM5NkMsQ0FBQztxQ0FNeUIsaUJBQVU7R0FMeEIsMEJBQTBCLENBZ0R0QztBQWhEWSxnRUFBMEIiLCJmaWxlIjoiY29tcG9uZW50cy9maWxlLXVwbG9hZGluZy1saXN0LmNvbXBvbmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgRWxlbWVudFJlZiwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZpbGVNb2RlbCB9IGZyb20gJy4uL21vZGVscy9maWxlLm1vZGVsJztcblxuLyoqXG4gKiA8YWxmcmVzY28tZmlsZS11cGxvYWRpbmctbGlzdCBbZmlsZXNVcGxvYWRpbmdMaXN0XT1cIkZpbGVNb2RlbFtdXCIgPjwvYWxmcmVzY28tZmlsZS11cGxvYWRpbmctbGlzdD5cbiAqXG4gKiBUaGlzIGNvbXBvbmVudCBzaG93IGEgbGlzdCBvZiB0aGUgdXBsb2FkaW5nIGZpbGVzIGNvbnRhaW5lZCBpbiB0aGUgZmlsZXNVcGxvYWRpbmdMaXN0LlxuICpcbiAqIEBJbnB1dFBhcmFtIHtGaWxlTW9kZWxbXX0gZmlsZXNVcGxvYWRpbmdMaXN0IC0gbGlzdCBvZiB0aGUgdXBsb2FkaW5nIGZpbGVzIC5cbiAqXG4gKlxuICogQHJldHVybnMge0ZpbGVVcGxvYWRpbmdMaXN0Q29tcG9uZW50fSAuXG4gKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWxmcmVzY28tZmlsZS11cGxvYWRpbmctbGlzdCcsXG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICB0ZW1wbGF0ZTogXCI8ZGl2IFtuZ0NsYXNzXT1cXFwie2hpZGU6ICBpc1VwbG9hZENvbXBsZXRlZCgpfVxcXCIgW25nQ2xhc3NdPVxcXCJ7c2hvdzogICAhaXNVcGxvYWRDb21wbGV0ZWQoKX1cXFwiICAgICAgY2xhc3M9XFxcImJvZHktZGlhbG9nLWhlYWRlclxcXCI+ICAgICA8ZGl2IGNsYXNzPVxcXCJib2R5LWRpYWxvZy1hY3Rpb25cXFwiPjwvZGl2PiAgICAgPGRpdiBjbGFzcz1cXFwiYm9keS1kaWFsb2ctY2FuY2VsXFxcIj48YSBkYXRhLWF1dG9tYXRpb24taWQ9XFxcImNhbmNlbF91cGxvYWRfYWxsXFxcIiBocmVmPVxcXCIjXFxcIiAoY2xpY2spPVxcXCJjYW5jZWxBbGxGaWxlcygkZXZlbnQpXFxcIj57eydGSUxFX1VQTE9BRC5CVVRUT04uQ0FOQ0VMJyB8IHRyYW5zbGF0ZX19PC9hPjwvZGl2PiA8L2Rpdj4gPHRhYmxlIGNsYXNzPVxcXCJtZGwtZGF0YS10YWJsZSBtZGwtanMtZGF0YS10YWJsZSBtZGwtc2hhZG93LS0yZHBcXFwiPiAgICAgPHRyPiAgICAgICAgIDx0aD57eydGSUxFX1VQTE9BRC5GSUxFX0lORk8uTkFNRScgfCB0cmFuc2xhdGV9fTwvdGg+ICAgICAgICAgPHRoPnt7J0ZJTEVfVVBMT0FELkZJTEVfSU5GTy5QUk9HUkVTUycgfCB0cmFuc2xhdGV9fTwvdGg+ICAgICAgICAgPHRoIGNsYXNzPVxcXCJtZGwtY2VsbC0taGlkZS1waG9uZSBzaXplLWNvbHVtblxcXCI+e3snRklMRV9VUExPQUQuRklMRV9JTkZPLlNJWkUnIHwgdHJhbnNsYXRlfX08L3RoPiAgICAgICAgIDx0aD57eydGSUxFX1VQTE9BRC5GSUxFX0lORk8uQUNUSU9OJyB8IHRyYW5zbGF0ZX19PC90aD4gICAgIDwvdHI+ICAgICA8dHIgKm5nRm9yPVxcXCJsZXQgZmlsZSBvZiBmaWxlc1VwbG9hZGluZ0xpc3RcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj4gICAgICAgICA8dGQgYXR0ci5kYXRhLWF1dG9tYXRpb24taWQ9XFxcImRpYWxvZ197e2ZpbGUubmFtZX19XFxcIiBjbGFzcz1cXFwibWRsLWRhdGEtdGFibGVfX2NlbGwtLW5vbi1udW1lcmljXFxcIj48ZGl2IGNsYXNzPVxcXCJ0cnVuY2F0ZVxcXCI+e3tmaWxlLm5hbWV9fTwvZGl2PjwvdGQ+ICAgICAgICAgPHRkIF9uZ2NvbnRlbnQtaHZxLTM9XFxcIlxcXCI+ICAgICAgICAgICAgIDxkaXYgX25nY29udGVudC1odnEtMz1cXFwiXFxcIiBjbGFzcz1cXFwibWRsLXByb2dyZXNzIG1kbC1qcy1wcm9ncmVzcyBpcy11cGdyYWRlZFxcXCIgaWQ9XFxcInt7ZmlsZS5pZH19XFxcIiAgICAgICAgICAgICAgICAgIGRhdGEtdXBncmFkZWQ9XFxcIixNYXRlcmlhbFByb2dyZXNzXFxcIj4gICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInByb2dyZXNzYmFyIGJhciBiYXIxXFxcIiBhdHRyLmRhdGEtYXV0b21hdGlvbi1pZD1cXFwiZGlhbG9nX3Byb2dyZXNzX3t7ZmlsZS5uYW1lfX1cXFwiIFtzdHlsZS53aWR0aC4lXT1cXFwiZmlsZS5wcm9ncmVzcy5wZXJjZW50XFxcIj48L2Rpdj4gICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJ1ZmZlcmJhciBiYXIgYmFyMlxcXCIgc3R5bGU9XFxcIndpZHRoOiAxMDAlO1xcXCI+PC9kaXY+ICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhdXhiYXIgYmFyIGJhcjNcXFwiIHN0eWxlPVxcXCJ3aWR0aDogMCU7XFxcIj48L2Rpdj4gICAgICAgICAgICAgPC9kaXY+ICAgICAgICAgPC90ZD4gICAgICAgICA8dGQgY2xhc3M9XFxcIm1kbC1kYXRhLXRhYmxlX19jZWxsLS1ub24tbnVtZXJpYyBtZGwtY2VsbC0taGlkZS1waG9uZSBzaXplLWNvbHVtblxcXCIgYXR0ci5kYXRhLWF1dG9tYXRpb24taWQ9XFxcInt7ZmlsZS5uYW1lfX1fZmlsZXNpemVcXFwiPnt7ZmlsZS5zaXplfX08L3RkPiAgICAgICAgIDx0ZD4gICAgICAgICAgICAgPHNwYW4gKm5nSWY9XFxcImZpbGUuZG9uZSAmJiAhZmlsZS5hYm9ydFxcXCIgPjxpIGRhdGEtYXV0b21hdGlvbi1pZD1cXFwiZG9uZV9pY29uXFxcIiBjbGFzcz1cXFwibWF0ZXJpYWwtaWNvbnMgYWN0aW9uLWljb25zXFxcIj5kb25lPC9pPjwvc3Bhbj4gICAgICAgICAgICAgPHNwYW4gKm5nSWY9XFxcImZpbGUudXBsb2FkaW5nXFxcIiAoY2xpY2spPVxcXCJhYm9ydChmaWxlLmlkKVxcXCIgY2xhc3M9XFxcImN1cnNvclxcXCIgdGFiaW5kZXg9XFxcIjBcXFwiPjxpIGRhdGEtYXV0b21hdGlvbi1pZD1cXFwiYWJvcnRfY2FuY2VsX3VwbG9hZFxcXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVxcXCJtYXRlcmlhbC1pY29ucyBhY3Rpb24taWNvbnNcXFwiPiAgICAgICAgICAgICAgICAgcmVtb3ZlX2NpcmNsZV9vdXRsaW5lPC9pPjwvc3Bhbj4gICAgICAgICAgICAgPHNwYW4gKm5nSWY9XFxcImZpbGUuYWJvcnRcXFwiPjxpIGNsYXNzPVxcXCJtYXRlcmlhbC1pY29ucyBhY3Rpb24taWNvbnNcXFwiIGRhdGEtYXV0b21hdGlvbi1pZD1cXFwidXBsb2FkX3N0b3BwZWRcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj5yZW1vdmVfY2lyY2xlPC9pPjwvc3Bhbj4gICAgICAgICA8L3RkPiAgICAgPC90cj4gPC90YWJsZT5cIixcbiAgICBzdHlsZXM6IFtcIi5tZGwtZGF0YS10YWJsZSB7ICAgICB3aWR0aDogMTAwJTsgICAgIGJvcmRlcjogMHB4OyB9ICAuY3Vyc29yIHsgICAgIGN1cnNvcjogcG9pbnRlcjsgfSAgLmJvZHktZGlhbG9nLWhlYWRlciB7ICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDsgICAgIGRpc3BsYXk6IC1tb3otYm94OyAgICAgZGlzcGxheTogLW1zLWZsZXhib3g7ICAgICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7ICAgICBkaXNwbGF5OiBmbGV4OyAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTsgICAgIGJvcmRlci1ib3R0b206IHNvbGlkIDFweCAjZWVlOyAgICAgaGVpZ2h0OiAzMHB4OyAgICAgbGluZS1oZWlnaHQ6IDMwcHg7IH0gIC5ib2R5LWRpYWxvZy1hY3Rpb24geyAgICAgLXdlYmtpdC1mbGV4OiAxIDEgYXV0bzsgICAgIGZsZXg6IDEgMSBhdXRvOyAgICAgb3ZlcmZsb3c6IGhpZGRlbjsgICAgIHBhZGRpbmc6IDAgMThweDsgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDsgfSAgLmJvZHktZGlhbG9nLWNhbmNlbCB7ICAgICAtd2Via2l0LWZsZXg6IG5vbmU7ICAgICBmbGV4OiBub25lOyAgICAgZGlzcGxheTogaW5saW5lOyAgICAgcGFkZGluZy1yaWdodDogMTNweDsgICAgIHRleHQtYWxpZ246IHJpZ2h0OyB9ICAuYWN0aW9uLWljb25zIHsgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgICAgIHdpZHRoOiAxMDAlOyB9IDpob3N0IC50cnVuY2F0ZSB7ICAgICBtYXJnaW4tbGVmdDogYXV0bzsgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7ICAgICBvdmVyZmxvdzogaGlkZGVuOyAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IH0gIDpob3N0IC5tZGwtcHJvZ3Jlc3N7ICAgICB3aWR0aDogMTUwcHg7IH0gIEBtZWRpYSAobWF4LWRldmljZS13aWR0aDogMzYwcHgpeyAgICAgLnRydW5jYXRlIHsgICAgICAgICBtYXgtd2lkdGg6IDUwcHg7ICAgICAgICAgbWFyZ2luLWxlZnQ6IDBweDsgICAgIH0gfSAgQG1lZGlhIChtYXgtZGV2aWNlLXdpZHRoOiA1NjhweCkgeyAgICAgLnRydW5jYXRlIHsgICAgICAgICB3aWR0aDogNjBweDsgICAgIH0gICAgIC5tZGwtcHJvZ3Jlc3MgeyAgICAgICAgIHdpZHRoOiA2MHB4OyAgICAgfSB9ICBAbWVkaWEgKG1heC13aWR0aDogNzQwcHgpIHsgICAgIC50cnVuY2F0ZSB7ICAgICAgICAgbWF4LXdpZHRoOiA4MHB4OyAgICAgfSAgICAgIC5tZGwtcHJvZ3Jlc3MgeyAgICAgICAgIG1heC13aWR0aDogNzBweDsgICAgIH0gICAgICAuc2l6ZS1jb2x1bW4geyAgICAgICAgIGRpc3BsYXk6IG5vbmU7ICAgICB9IH0gIEBtZWRpYSAobWluLXdpZHRoOiA3NDBweCkgeyAgICAgLnRydW5jYXRlIHsgICAgICAgICB3aWR0aDogMjQ5cHg7ICAgICB9ICAgICAgLnNpemUtY29sdW1uIHsgICAgICAgICBkaXNwbGF5OiB0YWJsZS1jZWxsOyAgICAgfSB9XCJdXG59KVxuZXhwb3J0IGNsYXNzIEZpbGVVcGxvYWRpbmdMaXN0Q29tcG9uZW50IHtcblxuICAgIEBJbnB1dCgpXG4gICAgZmlsZXNVcGxvYWRpbmdMaXN0OiBGaWxlTW9kZWwgW107XG5cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgZWw6IEVsZW1lbnRSZWYpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBYm9ydCB0aGUgaW4gcHJvZ3Jlc3MgdXBsb2FkaW5nIG9mIGEgc3BlY2lmaWMgZmlsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIEZpbGVNb2RlbCBpZCBvZiB0aGUgZmlsZSB0byBhYm9ydC5cbiAgICAgKi9cbiAgICBhYm9ydChpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGxldCBmaWxlID0gdGhpcy5maWxlc1VwbG9hZGluZ0xpc3QuZmlsdGVyKCh1cGxvYWRpbmdGaWxlTW9kZWwpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB1cGxvYWRpbmdGaWxlTW9kZWwuaWQgPT09IGlkO1xuICAgICAgICB9KTtcbiAgICAgICAgZmlsZVswXS5lbWl0QWJvcnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIHRoZSBhYm9ydCBtZXRob2QgZm9yIGVhY2ggZmlsZVxuICAgICAqL1xuICAgIGNhbmNlbEFsbEZpbGVzKCRldmVudCkge1xuICAgICAgICBpZiAoJGV2ZW50KSB7XG4gICAgICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpbGVzVXBsb2FkaW5nTGlzdC5mb3JFYWNoKCh1cGxvYWRpbmdGaWxlTW9kZWw6IEZpbGVNb2RlbCkgPT4ge1xuICAgICAgICAgICAgdXBsb2FkaW5nRmlsZU1vZGVsLmVtaXRBYm9ydCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWZXJpZnkgaWYgYWxsIHRoZSBmaWxlcyBhcmUgaW4gc3RhdGUgZG9uZSBvciBhYm9ydFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSAtIGZhbHNlIGlmIHRoZXJlIGlzIGEgZmlsZSBpbiBwcm9ncmVzc1xuICAgICAqL1xuICAgIGlzVXBsb2FkQ29tcGxldGVkKCkge1xuICAgICAgICBsZXQgaXNQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIGxldCBpc0FsbENvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5maWxlc1VwbG9hZGluZ0xpc3QubGVuZ3RoICYmICFpc1BlbmRpbmc7IGkrKykge1xuICAgICAgICAgICAgbGV0IHVwbG9hZGluZ0ZpbGVNb2RlbCA9IHRoaXMuZmlsZXNVcGxvYWRpbmdMaXN0W2ldO1xuICAgICAgICAgICAgaWYgKCF1cGxvYWRpbmdGaWxlTW9kZWwuZG9uZSAmJiAhdXBsb2FkaW5nRmlsZU1vZGVsLmFib3J0KSB7XG4gICAgICAgICAgICAgICAgaXNQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpc0FsbENvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0FsbENvbXBsZXRlZDtcbiAgICB9XG59XG4iXX0=
